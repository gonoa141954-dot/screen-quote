<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë°©ì¶©ë§ ìë™ê²¬ì  | ë°©ì¶©ë§ì‹œê³µì†Œ</title>

  <meta name="description" content="30ì´ˆ ì…€í”„ê²¬ì  Â· ìš”ì•½ ìë™ë³µì‚¬ í›„ ì˜¤í”ˆì±„íŒ… ìƒë‹´" />
  <meta property="og:title" content="ë°©ì¶©ë§ ìë™ê²¬ì  | ë°©ì¶©ë§ì‹œê³µì†Œ" />
  <meta property="og:description" content="ì…ë ¥ë§Œ í•˜ë©´ ê¸ˆì•¡ í™•ì¸ Â· ìƒë‹´ë°›ê¸° ëˆ„ë¥´ë©´ ê²¬ì ìš”ì•½ ìë™ë³µì‚¬" />
  <meta property="og:image" content="https://gonoa141954-dot.github.io/screen-quote/hero.png" />

  <style>
    :root{
      --bg:#ffffff; --bg2:#f7f8fb; --card:#ffffff;
      --line:rgba(15,23,42,.10);
      --text:#0f172a; --muted:rgba(15,23,42,.65); --muted2:rgba(15,23,42,.45);
      --brand:#2563eb; --brand2:#06b6d4; --good:#16a34a;
      --shadow: 0 18px 45px rgba(15,23,42,.10);
      --shadow2: 0 10px 28px rgba(15,23,42,.08);
      --r:22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 0% 0%, rgba(37,99,235,.10), transparent 60%),
        radial-gradient(900px 500px at 100% 0%, rgba(6,182,212,.10), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:980px;margin:0 auto;padding:18px 16px 140px;}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:6px 0 14px;}
    .brand{display:flex; flex-direction:column; gap:2px;}
    .brand b{font-size:15px; letter-spacing:-0.2px;}
    .brand span{font-size:12px; color:var(--muted);}
    .status{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.70);
      box-shadow:var(--shadow2);
      font-size:12px; color:var(--muted);
      white-space:nowrap;
    }
    .dot{width:9px;height:9px;border-radius:999px;background:var(--good);box-shadow:0 0 0 4px rgba(22,163,74,.18);}

    .hero{
      border:1px solid var(--line);
      border-radius:var(--r);
      overflow:hidden;
      background:rgba(255,255,255,.82);
      box-shadow:var(--shadow);
    }
    .heroGrid{display:grid; grid-template-columns:1fr;}
    @media (min-width:900px){ .heroGrid{grid-template-columns: 1.15fr .85fr;} }
    .heroMedia{position:relative;min-height:260px;background:#eef2ff;}
    .heroMedia img{width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.08) contrast(1.04);}
    .heroMedia::after{
      content:""; position:absolute; inset:0;
      background:linear-gradient(to top, rgba(255,255,255,.95), rgba(255,255,255,.10) 55%, rgba(255,255,255,0));
      pointer-events:none;
    }
    .heroContent{padding:18px;display:flex;flex-direction:column;gap:12px;}
    .kicker{
      display:inline-flex; align-items:center; gap:8px; width:max-content;
      padding:8px 10px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(37,99,235,.07);
      color:rgba(37,99,235,.95);
      font-weight:1000; font-size:12px;
    }
    .title{margin:0;font-size:22px;letter-spacing:-0.6px;line-height:1.15;font-weight:1000;}
    .sub{margin:0;color:var(--muted);font-size:13px;line-height:1.55;}
    .heroBtns{display:flex;flex-wrap:wrap;gap:10px;margin-top:2px;}
    .btn{
      border:1px solid var(--line);
      background:#fff; color:var(--text);
      padding:12px 14px; border-radius:16px;
      font-weight:1000; font-size:14px;
      cursor:pointer; min-height:46px;
      display:inline-flex; align-items:center; justify-content:center;
      box-shadow: 0 10px 18px rgba(15,23,42,.06);
      transition:transform .08s ease;
    }
    .btnPrimary{
      border-color:transparent;
      background:linear-gradient(135deg, var(--brand), var(--brand2));
      color:white;
      box-shadow: 0 16px 30px rgba(37,99,235,.18);
    }
    .btnSoft{background:rgba(15,23,42,.04);}
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0px)}
    .btnBig{
      font-size:16px;
      padding:14px 16px;
      min-height:54px;
      border-radius:18px;
    }

    .section{margin-top:14px;border:1px solid var(--line);border-radius:var(--r);background:rgba(255,255,255,.92);box-shadow:var(--shadow);overflow:hidden;}
    .sectionHead{padding:16px 16px 12px;border-bottom:1px solid var(--line);background:linear-gradient(180deg, rgba(37,99,235,.06), rgba(255,255,255,0));}
    .sectionHead h2{margin:0;font-size:16px;font-weight:1000;letter-spacing:-0.2px;}
    .sectionHead .desc{margin:6px 0 0;color:var(--muted);font-size:12.8px;line-height:1.5;}
    .sectionBody{padding:14px 16px 16px;}

    .row{display:grid;grid-template-columns:1fr;gap:10px;}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px;}
    input,select,textarea{
      width:100%;border-radius:16px;border:1px solid var(--line);
      background:#fff;color:var(--text);padding:12px 12px;font-size:14px;outline:none;
    }
    input:focus,select:focus,textarea:focus{
      border-color: rgba(37,99,235,.35);
      box-shadow: 0 0 0 4px rgba(37,99,235,.12);
    }
    textarea{min-height:150px;resize:vertical;line-height:1.5;}
    .note{font-size:12.5px;color:var(--muted);line-height:1.5;}

    .chip{
      display:flex; gap:10px; align-items:flex-start;
      border:1px solid var(--line);
      background:rgba(15,23,42,.03);
      border-radius:18px;
      padding:12px;
    }
    .chip input{width:auto;margin-top:2px}
    .chip b{font-weight:1000}

    /* âœ… ì˜ˆì•½/ì˜ìˆ˜ì¦ ë¦¬ë·° ì²´í¬ë°•ìŠ¤ ê°•ì¡°ìƒ‰ */
    .chipReview{
      background: #ffe8f0;
      border: 1px solid #f5c2d3;
      color:#8a1c3a;
    }

    details{border:1px solid var(--line);border-radius:18px;overflow:hidden;background:#fff;box-shadow: var(--shadow2);}
    summary{
      list-style:none;cursor:pointer;padding:14px 12px;font-weight:1000;
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      background: linear-gradient(180deg, rgba(15,23,42,.02), rgba(255,255,255,0));
    }
    summary::-webkit-details-marker{display:none;}
    .chev{color:var(--muted2); font-weight:1000;}
    .detailBody{padding:12px;border-top:1px solid var(--line);background:#fff;}

    .result{
      margin-top:14px;border:1px solid var(--line);border-radius:22px;
      background:linear-gradient(180deg, rgba(37,99,235,.06), rgba(255,255,255,0));
      box-shadow: var(--shadow);padding:14px;
    }
    .price{font-size:28px;font-weight:1000;letter-spacing:-0.6px;margin:0;}
    .resultMeta{margin:6px 0 10px;color:var(--muted);font-size:12.5px;line-height:1.5;}
    .btnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;}
    .toast{margin-top:8px;color:var(--muted);font-size:12px;min-height:16px;}

    .highlight{border-left:6px solid #FEE500;background:rgba(254,229,0,.22);}
    .highlightTitle{font-weight:1000;font-size:14px;letter-spacing:-0.2px;}

    .kakaoSticky{position:fixed;left:14px;right:14px;bottom:14px;z-index:50;max-width:980px;margin:0 auto;}
    .kakaoBtn{
      width:100%;display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:12px 14px;border-radius:20px;background:#FEE500;color:#191919;
      border:1px solid rgba(0,0,0,.10);box-shadow: 0 18px 44px rgba(15,23,42,.18);cursor:pointer;
    }
    .kLeft{display:flex;gap:12px;align-items:center;}
    .kBadge{
      width:40px;height:40px;border-radius:999px;display:grid;place-items:center;
      background:#191919;color:#FEE500;font-weight:1000;flex:0 0 auto;
    }
    .kText b{display:block;font-size:14px;font-weight:1000;letter-spacing:-0.2px;}
    .kText span{display:block;font-size:12px;color:rgba(25,25,25,.70);margin-top:2px;}
    .kRight{
      padding:10px 12px;border-radius:14px;background:rgba(25,25,25,.10);
      border:1px solid rgba(25,25,25,.14);font-weight:1000;font-size:12.5px;white-space:nowrap;
    }

    .modalBack{position:fixed;inset:0;background:rgba(15,23,42,.45);display:none;align-items:center;justify-content:center;padding:18px;z-index:80;}
    .modal{width:min(520px, 100%);background:#fff;border:1px solid var(--line);border-radius:22px;box-shadow: var(--shadow);overflow:hidden;}
    .modalTop{padding:14px 14px 10px;border-bottom:1px solid var(--line);background:linear-gradient(180deg, rgba(254,229,0,.22), rgba(255,255,255,0));}
    .modalTop b{font-weight:1000}
    .modalBody{padding:12px 14px 14px;color:var(--muted);font-size:13px;line-height:1.55;}
    .modalBtns{display:flex;gap:10px;padding:0 14px 14px;}
    .modalBtns .btn{flex:1}

    .stepper{display:grid;grid-template-columns:48px 1fr 48px;gap:8px;align-items:center;}
    .stepBtn{
      height:48px;border-radius:16px;border:1px solid var(--line);background:rgba(15,23,42,.04);
      font-weight:1000;font-size:18px;cursor:pointer;display:grid;place-items:center;
      user-select:none;box-shadow: 0 10px 18px rgba(15,23,42,.06);transition:transform .08s ease;
    }
    .stepBtn:hover{transform:translateY(-1px)}
    .stepBtn:active{transform:translateY(0px)}
    .stepInput{height:48px;text-align:center;font-weight:900;font-size:16px;padding:12px 10px;}
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button{ -webkit-appearance:none;margin:0; }
    input[type=number]{ -moz-appearance:textfield; }

    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
    @media (max-width:520px){ .grid2{grid-template-columns:1fr;} }

    .list{border:1px solid var(--line);background:#fff;border-radius:18px;overflow:hidden;box-shadow:var(--shadow2);}
    .listHead{display:flex;justify-content:space-between;align-items:center;padding:12px 12px;border-bottom:1px solid var(--line);background:linear-gradient(180deg, rgba(15,23,42,.02), rgba(255,255,255,0));gap:10px;font-weight:1000;}
    .listBody{padding:10px 12px;display:flex;flex-direction:column;gap:8px;}
    .item{display:flex;gap:10px;align-items:flex-start;justify-content:space-between;border:1px solid rgba(15,23,42,.10);background:rgba(15,23,42,.02);border-radius:16px;padding:10px 10px;}
    .item .left{min-width:0;}
    .item b{font-weight:1000}
    .item .meta{font-size:12px;color:var(--muted);margin-top:4px;line-height:1.35;}
    .xBtn{border:1px solid rgba(15,23,42,.12);background:#fff;border-radius:14px;padding:8px 10px;font-weight:1000;cursor:pointer;white-space:nowrap;}

    /* âœ… Hero ëª¨ë°”ì¼ ê°€ìš´ë° ì •ë ¬ */
    @media (max-width: 899px){
      .heroContent{
        text-align:center;
        align-items:center;
      }
      .heroBtns{
        justify-content:center;
      }
      .kicker{
        margin:0 auto;
      }
      .note{
        text-align:center;
      }
    }

    /* ===================== ì œí’ˆ ë³´ê¸°(ë¦¬ìŠ¤íŠ¸ â†’ ìƒì„¸ 1ê°œ) ===================== */
    .pMini{ margin-top:14px; }
    /* âœ… ì œí’ˆë³´ê¸°(ì¥ë‹¨ì ) ë²„íŠ¼/ì„¤ëª… ê°€ìš´ë° ì •ë ¬ */
#productGuide{
  text-align:center;
}
#productGuide .note{
  text-align:center; /* ê¸°ì¡´ .note ëª¨ë°”ì¼ì„¼í„°ë‘ ì¶©ëŒ ë°©ì§€ */
}
#productGuide #btnOpenProducts{
  margin-left:auto;
  margin-right:auto; /* ë²„íŠ¼ ìì²´ë„ ê°€ìš´ë° */
}

    .pBack{
      position:fixed; inset:0; background:rgba(15,23,42,.45);
      display:none; align-items:flex-end; justify-content:center;
      padding:18px; z-index:95;
    }
    .pSheet{
      width:min(760px, 100%);
      background:#fff;
      border:1px solid var(--line);
      border-radius:22px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .pTop{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 14px 10px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(180deg, rgba(37,99,235,.10), rgba(255,255,255,0));
    }
    .pX{
      border:1px solid var(--line);
      background:rgba(15,23,42,.04);
      border-radius:14px;
      padding:10px 12px;
      font-weight:1000;
      cursor:pointer;
    }
    .pList{
      padding:12px 14px 14px;
      display:flex; flex-direction:column; gap:10px;
    }
    .pItem{
      width:100%;
      border:1px solid var(--line);
      background:#fff;
      border-radius:18px;
      padding:12px 12px;
      font-weight:1000;
      cursor:pointer;
      text-align:left;
      box-shadow:var(--shadow2);
      display:grid;
      grid-template-columns: 36px 1fr;
      grid-template-rows:auto auto;
      column-gap:10px;
    }
    .pItem:active{ transform:translateY(1px); }
    .pIco{
      grid-row:1 / span 2;
      width:36px;height:36px;border-radius:14px;
      display:grid;place-items:center;
      border:1px solid var(--line);
      background:rgba(15,23,42,.03);
      font-size:16px;
    }
    .pTxt{ font-size:14px; }
    .pSub{ font-size:12px; color:var(--muted); font-weight:700; margin-top:2px; }

    .pDetail{ padding:12px 14px 14px; }
    .pBackBtn{
      border:1px solid var(--line);
      background:rgba(15,23,42,.04);
      border-radius:14px;
      padding:10px 12px;
      font-weight:1000;
      cursor:pointer;
      margin-bottom:10px;
    }
    .pCard{
      border:1px solid var(--line);
      border-radius:18px;
      background:linear-gradient(180deg, rgba(37,99,235,.06), rgba(255,255,255,0));
      box-shadow:var(--shadow2);
      padding:12px;
    }
    .pBadge2{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      font-weight:1000;
      font-size:12px;
      color:rgba(37,99,235,.95);
    }
    .pName2{
      margin:10px 0 6px;
      font-size:18px;
      font-weight:1000;
      letter-spacing:-0.4px;
    }
    .pOne2{
      margin:0 0 10px;
      color:var(--muted);
      font-size:13px;
      line-height:1.55;
    }
    .pPick{
      border:1px solid var(--line);
      background:#fff;
      border-radius:16px;
      padding:10px;
      margin:10px 0 10px;
    }
    .pPickTitle{ font-weight:1000; font-size:13px; margin-bottom:8px; }
    .pSeg{
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .pSeg button{
      border:1px solid var(--line);
      background:rgba(15,23,42,.04);
      border-radius:999px;
      padding:10px 12px;
      font-weight:1000;
      cursor:pointer;
    }
    .pSeg button.isOn{
      background:linear-gradient(135deg, var(--brand), var(--brand2));
      color:#fff;
      border-color:transparent;
    }
    .pCols2{
      display:grid; grid-template-columns:1fr; gap:10px;
      margin-top:10px;
    }
    @media (min-width:640px){
      .pCols2{ grid-template-columns:1fr 1fr; }
    }
    .pCol2{
      border:1px solid var(--line);
      background:#fff;
      border-radius:16px;
      padding:10px;
    }
    .pCol2 b{ display:block; margin-bottom:6px; }
    .pCol2 ul{
      margin:0; padding-left:18px;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }
    .pMedia2{
      border:1px dashed rgba(15,23,42,.20);
      background:rgba(255,255,255,.7);
      border-radius:16px;
      padding:12px;
      margin-top:10px;
      color:var(--muted2);
      font-weight:900;
      font-size:12.5px;
    }
    .pActions2{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .pActions2 .btn{ flex:1; min-width:180px; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <b>ë°©ì¶©ë§ì‹œê³µì†Œ</b>
        <span>ì…€í”„ê²¬ì  Â· ìš”ì•½ ìë™ë³µì‚¬ Â· ì˜¤í”ˆì±„íŒ… ìƒë‹´</span>
      </div>
      <div class="status"><span class="dot"></span> ìƒë‹´ ê°€ëŠ¥</div>
    </div>

    <div class="hero">
      <div class="heroGrid">
        <div class="heroMedia">
          <img src="./hero.png" alt="ë°©ì¶©ë§ ìë™ê²¬ì  ì´ë¯¸ì§€" />
        </div>
        <div class="heroContent">
          <div class="kicker">âš¡ 30ì´ˆ ì…€í”„ê²¬ì </div>
          <h1 class="title">ë°©ì¶©ë§ ìë™ê²¬ì </h1>
          <p class="sub">
            ì…ë ¥ë§Œ í•˜ë©´ ê¸ˆì•¡ í™•ì¸ë©ë‹ˆë‹¤.
            ì•„ë˜ <b>ìƒë‹´ë°›ê¸°</b> ëˆ„ë¥´ë©´ <b>ê²¬ì ìš”ì•½ì´ ìë™ ë³µì‚¬</b>ë©ë‹ˆë‹¤.
          </p>
          <div class="heroBtns">
            <button class="btn btnPrimary btnBig" id="btnGoQuote">ì…€í”„ ê²¬ì í•˜ê¸°</button>
          </div>
          <div class="note">â€» ì˜ˆì•½/ì˜ìˆ˜ì¦ ì²´í¬ ì‹œ 10% í• ì¸ ì ìš©ë©ë‹ˆë‹¤. (ë°©ë²”/ì¶”ë½ ì•ˆì „ë§ì€ ì œì™¸)</div>
        </div>
      </div>
    </div>

    <!-- ===================== ì œí’ˆ ë³´ê¸°(ë¦¬ìŠ¤íŠ¸ â†’ ìƒì„¸ 1ê°œ) : ì—¬ê¸°! ===================== -->
    <div class="pMini" id="productGuide">
      <button class="btn btnSoft btnBig" type="button" id="btnOpenProducts">
        ğŸ§¾ ì œí’ˆ ë³´ê¸° (ì¥ë‹¨ì  ê°„ë‹¨ì •ë¦¬)
      </button>
      <div class="note" style="margin-top:8px;">
        * ëˆ„ë¥´ë©´ ì œí’ˆ ì´ë¦„ë§Œ ëœ¨ê³ , í•˜ë‚˜ ì„ íƒí•˜ë©´ ê·¸ ì œí’ˆ ì„¤ëª…ë§Œ ë”± ë³´ì—¬ìš”.
      </div>
    </div>

    <div class="pBack" id="pBack" aria-hidden="true">
      <div class="pSheet" role="dialog" aria-modal="true" aria-labelledby="pTitle">
        <div class="pTop">
          <b id="pTitle">ì œí’ˆ ì„ íƒ</b>
          <button class="pX" type="button" id="btnCloseProducts" aria-label="ë‹«ê¸°">ë‹«ê¸°</button>
        </div>

        <!-- 1) ì œí’ˆ ë¦¬ìŠ¤íŠ¸ (âœ… í‹€ì œì‘ ì œì™¸) -->
        <div class="pList" id="pList" role="listbox" aria-label="ì œí’ˆ ë¦¬ìŠ¤íŠ¸">
          <button class="pItem" type="button" data-prod="micro" role="option">
            <span class="pIco">ğŸªŸ</span><span class="pTxt">ë¯¸ì„¸ë°©ì¶©ë§</span><span class="pSub">ì´ˆíŒŒë¦¬/ë‚ íŒŒë¦¬ ì°¨ë‹¨ ì²´ê°</span>
          </button>

          <button class="pItem" type="button" data-prod="hydro_micro" role="option">
            <span class="pIco">ğŸ’§</span><span class="pTxt">ë°œìˆ˜ì½”íŒ… ë¯¸ì„¸ë°©ì¶©ë§</span><span class="pSub">ì˜¤ì—¼/ë¬¼ë•Œ ê´€ë¦¬ í¸í•œ í¸</span>
          </button>

          <button class="pItem" type="button" data-prod="black_stainless_micro" role="option">
            <span class="pIco">ğŸ¾</span><span class="pTxt">ë¸”ë™ìŠ¤í… ë¯¸ì„¸ë°©ì¶©ë§</span><span class="pSub">ë°˜ë ¤ë¬˜/ë°˜ë ¤ê²¬ ê°€ì • ì¸ê¸°</span>
          </button>

          <button class="pItem" type="button" data-prod="entrance" role="option">
            <span class="pIco">ğŸšª</span><span class="pTxt">í˜„ê´€ ë¡¤ë°©ì¶©ë§ (ì¼ë°˜/ë¯¸ì„¸)</span><span class="pSub">ê°œìˆ˜ë³„ ë‹¨ê°€ ìë™ ì ìš©</span>
          </button>

          <button class="pItem" type="button" data-prod="pj" role="option">
            <span class="pIco">ğŸ§©</span><span class="pTxt">PJ ë¡¤ë°©ì¶©ë§</span><span class="pSub">PJì°½ì€ ì¼ë°˜ë§ ì„¤ì¹˜ ë¶ˆê°€</span>
          </button>

          <button class="pItem" type="button" data-prod="safety" role="option">
            <span class="pIco">ğŸ›¡ï¸</span><span class="pTxt">ì•ˆì „ë°©ì¶©ë§ (0.7 / 0.4)</span><span class="pSub">ì €ì¸µ ë°©ë²” / 3ì¸µâ†‘ ë²”ìš©</span>
          </button>
        </div>

        <!-- 2) ìƒì„¸(ì„ íƒ 1ê°œë§Œ) -->
        <div class="pDetail" id="pDetail" style="display:none;">
          <button class="pBackBtn" type="button" id="btnBackToList">â† ì œí’ˆ ë¦¬ìŠ¤íŠ¸</button>

          <div class="pCard">
            <div class="pBadge2" id="pBadge2">-</div>
            <h3 class="pName2" id="pName2">-</h3>
            <p class="pOne2" id="pOne2">-</p>

            <!-- ì˜µì…˜ ì„ íƒ(í˜„ê´€ë¡¤ / ì•ˆì „ë°©ì¶©ë§ë§Œ ë…¸ì¶œ) -->
            <div class="pPick" id="pPick" style="display:none;">
              <div class="pPickTitle" id="pPickTitle">ì˜µì…˜ ì„ íƒ</div>
              <div class="pSeg" id="pSeg"></div>
              <div class="note" id="pPickNote" style="margin-top:6px;"></div>
            </div>

            <div class="pCols2">
              <div class="pCol2">
                <b>ì¥ì </b>
                <ul id="pPros"></ul>
              </div>
              <div class="pCol2">
                <b>ë‹¨ì </b>
                <ul id="pCons"></ul>
              </div>
            </div>

            <div class="pMedia2">
              ğŸ“Œ ì‚¬ì§„/ì§§ì€ GIFëŠ” ë‚˜ì¤‘ì— ì—¬ê¸°ë§Œ êµì²´í•˜ë©´ ë©ë‹ˆë‹¤.
            </div>

            <div class="pActions2">
              <button class="btn btnPrimary" type="button" id="btnApplyToQuote">ì´ê±¸ë¡œ ê²¬ì í•˜ê¸°</button>
              <button class="btn btnSoft" type="button" id="btnGoQuoteFromProduct">ê²¬ì  ì…ë ¥ìœ¼ë¡œ ì´ë™</button>
            </div>
          </div>
        </div>

      </div>
    </div>
    <!-- ===================== /ì œí’ˆ ë³´ê¸° ===================== -->

    <div class="section" id="quoteSection">
      <div class="sectionHead">
        <h2>ì…€í”„ ê²¬ì </h2>
        <p class="desc">í•„ìš”í•œ í•­ëª©ë§Œ í¼ì³ì„œ ì…ë ¥í•˜ì„¸ìš”.</p>
      </div>

      <div class="sectionBody">
        <div class="highlight" style="border-radius:18px;padding:12px;margin-bottom:12px;border:1px solid rgba(0,0,0,.06);">
          <div class="highlightTitle">âœ… ë§ êµì²´/ì•ˆì „ë§ 4ê°œ ì´ìƒ 5% ìë™ ì¶”ê°€ í• ì¸</div>
          <div class="note" style="margin-top:4px;">
            âœ… ì˜ˆì•½/ì˜ìˆ˜ì¦(10%) í• ì¸ì€ <b>ë§ êµì²´ë§Œ ê°€ëŠ¥</b>
          </div>
        </div>

        <div class="note" style="margin:0 0 12px 0;">
          âœ… <b>í˜„ê´€ë¡¤ / PJë¡¤ / í‹€ì œì‘</b>ì€ â€œê°œìˆ˜ë³„ ì°¨ë“± í• ì¸<br>
          (ë‹¨ê°€ ìë™ ë°˜ì˜)â€ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.
        </div>

        <div class="chip chipReview" style="margin-bottom:12px;">
          <input type="checkbox" id="discount10">
          <div>
            <div><b>ì˜ˆì•½ë¦¬ë·°</b>or<b>ì˜ìˆ˜ì¦ë¦¬ë·°</b> ì•½ì†</div>
            <div class="note">ì²´í¬í•˜ë©´ ì´ì•¡ì—ì„œ ìë™ìœ¼ë¡œ <b style="color:#e11d48;">10% í• ì¸</b></div>
          </div>
        </div>

        <!-- ì°½ë¬¸í˜• -->
        <details id="dWindow">
          <summary><span>ì°½ë¬¸í˜• ë°©ì¶©ë§</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div>
                <label>ë°©ì¶©ë§ ì„ íƒ</label>
                <select id="meshType">
                  <option value="micro">ë¯¸ì„¸ë°©ì¶©ë§</option>
                  <option value="hydro_micro">ë°œìˆ˜ì½”íŒ… ë¯¸ì„¸ë°©ì¶©ë§</option>
                  <option value="black_stainless_micro">ë¸”ë™ìŠ¤í… ë¯¸ì„¸ë°©ì¶©ë§</option>
                </select>
              </div>

              <div>
                <label>ì†Œí˜•(ê°œ) <span class="note">Â· ë†’ì´ 500 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="cntS">âˆ’</button>
                  <input id="cntS" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="cntS">ï¼‹</button>
                </div>
              </div>

              <div>
                <label>ì¤‘í˜•(ê°œ) <span class="note">Â· ë†’ì´ 1500 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="cntM">âˆ’</button>
                  <input id="cntM" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="cntM">ï¼‹</button>
                </div>
              </div>

              <div>
                <label>ëŒ€í˜•(ê°œ) <span class="note">Â· ë†’ì´ 2300 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="cntL">âˆ’</button>
                  <input id="cntL" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="cntL">ï¼‹</button>
                </div>
              </div>

              <div><label>ë©”ëª¨(ì„ íƒ)</label><input id="memo" placeholder="ì˜ˆ: ì €ì¸µ/ì•„ì´ ìˆìŒ/ì´ˆíŒŒë¦¬ ìœ ì… ë“±"></div>
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <!-- âœ… ë°©ë²”/ì¶”ë½ -->
        <details id="dSafety">
          <summary><span>ë°©ë²”/ì¶”ë½ ì•ˆì „ ë°©ì¶©ë§<br>(mm ì…ë ¥)</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div class="note">
                * ê°€ë¡œ/ì„¸ë¡œ(mm)ì™€ ìˆ˜ëŸ‰ ì…ë ¥ í›„ <b>ì¶”ê°€</b>ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.<br/>
                * ì•ˆì „ë§ì€ <b>ì˜ˆì•½/ì˜ìˆ˜ì¦ 10% í• ì¸ ì ìš© ë¶ˆê°€</b> (ë‹¨, ì°½ë¬¸í˜•+ì•ˆì „ë§ 4ê°œ ì´ìƒì´ë©´ 5% ì¶”ê°€ í• ì¸ ì ìš©)
              </div>

              <div class="grid2">
                <div>
                  <label>ì¢…ë¥˜</label>
                  <select id="safetyKind">
                    <option value="crime">ë°©ë²”ì•ˆì „ ë°©ì¶©ë§</option>
                    <option value="fall">ì¶”ë½ì•ˆì „ ë°©ì¶©ë§</option>
                  </select>
                </div>
                <div>
                  <label>ë§ ê·œê²©(ìë™)</label>
                  <input id="safetyGauge" readonly value="0.7mm">
                </div>
              </div>

              <div class="grid2">
                <div>
                  <label>ê°€ë¡œ(mm)</label>
                  <input id="safetyW" type="number" min="0" step="1" value="0" inputmode="numeric" placeholder="ì˜ˆ: 850">
                </div>
                <div>
                  <label>ì„¸ë¡œ(mm)</label>
                  <input id="safetyH" type="number" min="0" step="1" value="0" inputmode="numeric" placeholder="ì˜ˆ: 2050">
                </div>
              </div>

              <div>
                <label>ìˆ˜ëŸ‰</label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="safetyQty">âˆ’</button>
                  <input id="safetyQty" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="safetyQty">ï¼‹</button>
                </div>
              </div>

              <button class="btn btnPrimary" type="button" id="btnAddSafety">ì¶”ê°€</button>
              <div class="note" id="safetyPreview"></div>

              <div class="list" id="safetyListBox" style="display:none;">
                <div class="listHead">
                  <span>ì¶”ê°€ëœ í•­ëª©</span>
                  <span class="note" id="safetySumText"></span>
                </div>
                <div class="listBody" id="safetyList"></div>
              </div>
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <!-- í˜„ê´€ë¡¤ -->
        <details id="dEntrance">
          <summary><span>í˜„ê´€ ë¡¤ë°©ì¶©ë§<br>(ê°œìˆ˜ë³„ ì°¨ë“± í• ì¸)</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div>
                <label>ì¢…ë¥˜ ì„ íƒ</label>
                <select id="entranceType">
                  <option value="normal">í˜„ê´€ ë¡¤ë°©ì¶©ë§</option>
                  <option value="micro">í˜„ê´€ ë¯¸ì„¸ ë¡¤ë°©ì¶©ë§</option>
                </select>
              </div>

              <div>
                <label>ì‚¬ì´ì¦ˆ ì„ íƒ</label>
                <select id="entranceSize">
                  <option value="under">1000 Ã— 2100 ì´í•˜</option>
                  <option value="over">1000 Ã— 2100 ì´ìƒ</option>
                </select>
              </div>

              <div>
                <label>ê°œìˆ˜</label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="entranceQty">âˆ’</button>
                  <input id="entranceQty" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="entranceQty">ï¼‹</button>
                </div>
              </div>

              <div class="note">* ê°œìˆ˜ì— ë”°ë¼ <b>ë‹¨ê°€ê°€ ìë™ìœ¼ë¡œ ë‚´ë ¤ê°‘ë‹ˆë‹¤</b>. (5ê°œ ì´í›„ë„ 5ê°œ ë‹¨ê°€ë¡œ ê³ ì •)</div>
              <div class="note">* ê° íŒŒì´í”„ ì‘ì—… í•„ìš” ì‹œ ë¹„ìš© ì¶”ê°€</div>
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <!-- PJ ë¡¤ (ë¶„ë¦¬/ë¹„ì›€) -->
        <details id="dPJ">
          <summary><span>PJ ë¡¤ ë°©ì¶©ë§ (ë³„ë„ ê²¬ì  ë¬¸ì˜)</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="note">
              * PJ ë¡¤ì€ í˜„ì¥ ì¡°ê±´ì´ ë‹¤ì–‘í•´ì„œ ìë™ê²¬ì ì€ ì ì‹œ ë¹„ì›Œë‘ì—ˆìŠµë‹ˆë‹¤.<br/>
              * ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ë¬¸ì˜ ì£¼ì‹œë©´ ë¹ ë¥´ê²Œ ì•ˆë‚´ë“œë¦´ê²Œìš”.
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <!-- ì•Œë¯¸ëŠ„ -->
        <details id="dAl">
          <summary><span>ì•Œë¯¸ëŠ„ í‹€ ì œì‘(ë¯¸ì„¸ë§ í¬í•¨)<br>(ê°œìˆ˜ë³„ ì°¨ë“± í• ì¸)</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div class="note">
                * ì†Œ/ì¤‘: 1ê°œ 10ë§Œ â†’ 2ê°œ(ê°œë‹¹ 9ë§Œ) â†’ 3ê°œ ì´ìƒ(ê°œë‹¹ 8ë§Œ)<br/>
                * ëŒ€ì°½: 1ê°œ 14ë§Œ â†’ 2ê°œ(12ë§Œ) â†’ 3ê°œ(11ë§Œ) â†’ 4ê°œ ì´ìƒ(ê°œë‹¹ 10ë§Œ)
              </div>

              <div>
                <label>ì†Œ/ì¤‘ (í•©ê³„ ê°œìˆ˜) <span class="note">Â· ë†’ì´ 1500 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="alSM">âˆ’</button>
                  <input id="alSM" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="alSM">ï¼‹</button>
                </div>
              </div>

              <div>
                <label>ëŒ€ì°½ (ê°œìˆ˜) <span class="note">Â· ë†’ì´ 2200 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="alL">âˆ’</button>
                  <input id="alL" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="alL">ï¼‹</button>
                </div>
              </div>
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <!-- í•˜ì´ìƒ¤ì‹œ -->
        <details id="dHS">
          <summary><span>í•˜ì´ìƒ¤ì‹œ í‹€ ì œì‘(ë¯¸ì„¸ë§ í¬í•¨) (ê°œìˆ˜ë³„ ì°¨ë“± í• ì¸)</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div class="note">
                * ì•Œë¯¸ëŠ„ê³¼ ë™ì¼ ê°€ê²© ì ìš©<br/>
                * ì†Œ/ì¤‘: 1ê°œ 10ë§Œ â†’ 2ê°œ(ê°œë‹¹ 9ë§Œ) â†’ 3ê°œ ì´ìƒ(ê°œë‹¹ 8ë§Œ)<br/>
                * ëŒ€ì°½: 1ê°œ 14ë§Œ â†’ 2ê°œ(12ë§Œ) â†’ 3ê°œ(11ë§Œ) â†’ 4ê°œ ì´ìƒ(ê°œë‹¹ 10ë§Œ)
              </div>

              <div>
                <label>ì†Œ/ì¤‘ (í•©ê³„ ê°œìˆ˜) <span class="note">Â· ë†’ì´ 1500 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="hsSM">âˆ’</button>
                  <input id="hsSM" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="hsSM">ï¼‹</button>
                </div>
              </div>

              <div>
                <label>ëŒ€ì°½ (ê°œìˆ˜) <span class="note">Â· ë†’ì´ 2200 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="hsL2">âˆ’</button>
                  <input id="hsL2" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="hsL2">ï¼‹</button>
                </div>
              </div>
            </div>
          </div>
        </details>

        <div class="result">
          <p class="price" id="resultPrice">0ì›</p>
          <div class="resultMeta" id="resultNote">ê°œìˆ˜ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.</div>

          <label>ê³ ê°ì—ê²Œ ë³´ë‚¼ ìš”ì•½(ìë™ ìƒì„±)</label>
          <textarea id="summary" readonly></textarea>

          <div class="btnRow">
            <button class="btn btnPrimary" id="btnCopy">ìš”ì•½ ë³µì‚¬</button>
            <button class="btn" id="btnReset">ì´ˆê¸°í™”</button>
          </div>
          <div class="toast" id="toast"></div>

          <div class="note" style="margin-top:8px;">
            ì•„ë˜ <b>ìƒë‹´ë°›ê¸°</b> ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>ìš”ì•½ì´ ìë™ ë³µì‚¬</b>ë˜ê³ , ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- modal -->
  <div class="modalBack" id="modalBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalTop"><b id="modalTitle">ê²¬ì ìš”ì•½ ìë™ë³µì‚¬</b></div>
      <div class="modalBody" id="modalBody">ë³µì‚¬ ì™„ë£Œ! ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™í•˜ë©´ ì±„íŒ…ì°½ì— ë¶™ì—¬ë„£ê¸°ë§Œ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</div>
      <div class="modalBtns">
        <button class="btn btnPrimary" id="btnGoKakao">ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™</button>
        <button class="btn btnSoft" id="btnCloseModal">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- sticky kakao -->
  <div class="kakaoSticky">
    <button class="kakaoBtn" id="kakaoConsultBtn" type="button">
      <div class="kLeft">
        <div class="kBadge">í†¡</div>
        <div class="kText">
          <b>ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ… ìƒë‹´</b>
          <span>ëˆ„ë¥´ë©´ ê²¬ì ìš”ì•½ ìë™ë³µì‚¬</span>
        </div>
      </div>
      <div class="kRight">ìƒë‹´ë°›ê¸°</div>
    </button>
  </div>

<script>
const KAKAO_URL = "https://open.kakao.com/o/symXVtei";

const CONFIG = {
  UNIT_PRICE_WINDOW: {
    micro:                 { S: 10000, M: 30000, L: 50000 },
    hydro_micro:           { S: 20000, M: 40000, L: 60000 },
    black_stainless_micro: { S: 25000, M: 50000, L: 70000 },
  },

  // ì˜ˆì•½/ì˜ìˆ˜ì¦ (10%) - âœ… ë°©ë²”/ì¶”ë½ ì•ˆì „ë§ ì œì™¸
  REVIEW_DISCOUNT_RATE: 0.10,

  // âœ… ì°½ë¬¸í˜• + ì•ˆì „ë§ í•©ì‚° 4ê°œ ì´ìƒì´ë©´ 5% ì¶”ê°€ í• ì¸
  WINDOW_SAFETY_QTY_DISCOUNT_MIN: 4,
  WINDOW_SAFETY_QTY_DISCOUNT_RATE: 0.05,

  // ì•ˆì „/ì¶”ë½ ì†Œë¹„ìê°€ê²© í‘œ(ë‚´ë¶€ ê³„ì‚°ìš©)
  SAFETY_CONSUMER_TABLE: {
    "0.4": {
      "0.3":150000,"0.4":150000,"0.5":150000,"0.6":150000,
      "0.7":160000,"0.8":170000,"0.9":180000,"1.0":190000,
      "1.1":200000,"1.2":210000,"1.3":220000,"1.4":230000,
      "1.5":240000,"1.6":250000,"1.7":260000,"1.8":270000,
      "1.9":280000,"2.0":290000,"2.1":300000,"2.2":310000,
      "2.3":320000,"2.4":330000,"2.5":340000,"2.6":350000,
      "2.7":360000,"2.8":370000,"2.9":380000,"3.0":390000
    },
    "0.7": {
      "0.3":180000,"0.4":180000,"0.5":180000,"0.6":180000,
      "0.7":190000,"0.8":200000,"0.9":210000,"1.0":220000,
      "1.1":230000,"1.2":240000,"1.3":250000,"1.4":260000,
      "1.5":270000,"1.6":280000,"1.7":290000,"1.8":300000,
      "1.9":310000,"2.0":320000,"2.1":330000,"2.2":340000,
      "2.3":350000,"2.4":360000,"2.5":370000,"2.6":380000,
      "2.7":390000,"2.8":400000,"2.9":410000,"3.0":420000
    }
  },
  SAFETY_MIN_M2: 0.3,
  SAFETY_MAX_M2: 3.0
};

const $ = (id) => document.getElementById(id);
const fmt = (n) => (Math.round(n)).toLocaleString("ko-KR") + "ì›";
const clampInt = (v) => Math.max(0, Number.isFinite(v) ? Math.floor(v) : 0);

function meshLabel(k){
  return ({
    micro: "ë¯¸ì„¸ë°©ì¶©ë§",
    hydro_micro: "ë°œìˆ˜ì½”íŒ… ë¯¸ì„¸ë°©ì¶©ë§",
    black_stainless_micro: "ë¸”ë™ìŠ¤í… ë¯¸ì„¸ë°©ì¶©ë§"
  })[k] || k;
}
function entranceTypeLabel(k){
  return ({
    normal: "í˜„ê´€ ë¡¤ë°©ì¶©ë§",
    micro: "í˜„ê´€ ë¯¸ì„¸ ë¡¤ë°©ì¶©ë§",
  })[k] || k;
}
function entranceSizeLabel(k){
  return (k === "under") ? "1000Ã—2100 ì´í•˜" : "1000Ã—2100 ì´ìƒ";
}
function safetyKindLabel(k){
  return (k === "crime") ? "ë°©ë²”ì•ˆì „ ë°©ì¶©ë§" : "ì¶”ë½ì•ˆì „ ë°©ì¶©ë§";
}
function safetyGaugeForKind(kind){
  return (kind === "crime") ? "0.7" : "0.4";
}

function toast(msg){
  $("toast").textContent = msg;
  setTimeout(()=>{ $("toast").textContent = ""; }, 2400);
}

function ceilToTenth(area){ return Math.ceil(area * 10) / 10; }
function safetyRoundedM2FromMM(wMm, hMm){
  const raw = (wMm * hMm) / 1_000_000;
  let rounded = ceilToTenth(raw);
  if(rounded < CONFIG.SAFETY_MIN_M2) rounded = CONFIG.SAFETY_MIN_M2;
  rounded = Number(rounded.toFixed(1));
  return { raw, rounded };
}
function safetyPriceByGaugeM2(gauge, roundedM2){
  const key = roundedM2.toFixed(1);
  const table = CONFIG.SAFETY_CONSUMER_TABLE[gauge];
  return table ? (table[key] ?? null) : null;
}

/* âœ… í˜„ê´€ë¡¤: ê°œìˆ˜ë³„ ë‹¨ê°€ */
function clampQty1to5(q){ return Math.max(1, Math.min(5, q)); }

function entranceUnitPrice(type, size, qty){
  const q = clampQty1to5(qty);

  // normal
  if(type === "normal" && size === "under"){
    const table = [160000,150000,130000,130000,120000];
    return table[q-1];
  }
  if(type === "normal" && size === "over"){
    const table = [180000,170000,160000,150000,140000];
    return table[q-1];
  }

  // micro
  if(type === "micro" && size === "under"){
    const table = [180000,170000,160000,150000,140000];
    return table[q-1];
  }
  if(type === "micro" && size === "over"){
    const table = [200000,190000,180000,170000,160000];
    return table[q-1];
  }

  return 0;
}

/* âœ… í‹€ì œì‘: ê°œìˆ˜ë³„ ë‹¨ê°€(ì•Œë¯¸ëŠ„/í•˜ì´ìƒ¤ì‹œ ë™ì¼) */
function frameUnitPriceSM(qty){
  if(qty >= 3) return 80000;
  if(qty === 2) return 90000;
  if(qty === 1) return 100000;
  return 0;
}
function frameUnitPriceL(qty){
  if(qty >= 4) return 100000;
  if(qty === 3) return 110000;
  if(qty === 2) return 120000;
  if(qty === 1) return 140000;
  return 0;
}

/* ì•ˆì „/ì¶”ë½ ëˆ„ì  ë¦¬ìŠ¤íŠ¸ */
let safetyItems = []; // {id, kind, gauge, w, h, qty, rawM2, roundedM2, unitPrice}

function safetySumTotal(){
  return safetyItems.reduce((acc, it)=> acc + (it.unitPrice * it.qty), 0);
}
function safetySumQty(){
  return safetyItems.reduce((acc, it)=> acc + it.qty, 0);
}
function renderSafetyList(){
  const box = $("safetyListBox");
  const list = $("safetyList");

  if(safetyItems.length === 0){
    box.style.display = "none";
    list.innerHTML = "";
    $("safetySumText").textContent = "";
    return;
  }

  box.style.display = "block";
  list.innerHTML = "";

  let sum = 0;

  safetyItems.forEach(item=>{
    const lineTotal = item.unitPrice * item.qty;
    sum += lineTotal;

    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <div class="left">
        <b>${safetyKindLabel(item.kind)} Â· ${item.gauge}mm</b>
        <div class="meta">
          ${item.w}Ã—${item.h}mm / ${item.qty}ê°œ<br/>
          ${fmt(item.unitPrice)} Ã— ${item.qty} = <b>${fmt(lineTotal)}</b>
        </div>
      </div>
      <button class="xBtn" type="button" data-del-safety="${item.id}">ì‚­ì œ</button>
    `;
    list.appendChild(div);
  });

  $("safetySumText").textContent = `í•©ê³„ ${fmt(sum)}`;
}

function buildSummary(ctx){
  const {
    totalFinal,
    totalConsumer,
    reviewDiscountOn,
    windowSafetyQtyDiscountApplied,
    windowSafetyQty,
    windowConsumer,
    safetyConsumer,
    entranceConsumer,
    alConsumer,
    hsConsumer,
    eligibleConsumer,
    windowSafetyQtyDiscountRate,
    eligibleAfterAllDiscounts,
    entranceQty,
    entranceUnit,
    alSM, alL, hsSM, hsL2,
    alUnitSM, alUnitL, hsUnitSM, hsUnitL
  } = ctx;

  const meshKey = $("meshType").value;
  const cntS = clampInt(parseFloat($("cntS").value));
  const cntM = clampInt(parseFloat($("cntM").value));
  const cntL = clampInt(parseFloat($("cntL").value));
  const memo = ($("memo").value || "").trim();

  const entranceType = $("entranceType").value;
  const entranceSize = $("entranceSize").value;

  const lines = [];
  lines.push(`ì°½ë¬¸í˜•: ${meshLabel(meshKey)}`);
  lines.push(`ì°½ ê°œìˆ˜: ì†Œ ${cntS}(ë†’ì´ 500â†“) / ì¤‘ ${cntM}(ë†’ì´ 1500â†“) / ëŒ€ ${cntL}(ë†’ì´ 2300â†“)`);

  if(safetyItems.length){
    lines.push(`ë°©ë²”/ì¶”ë½ ì•ˆì „ ë°©ì¶©ë§ (ë¦¬ë·° 10% í• ì¸ ì œì™¸):`);
    safetyItems.forEach((it, idx)=>{
      const lineTotal = it.unitPrice * it.qty;
      lines.push(`- ${idx+1}) ${safetyKindLabel(it.kind)} ${it.gauge}mm / ${it.w}Ã—${it.h}mm / ${it.qty}ê°œ / ${fmt(it.unitPrice)}Ã—${it.qty}=${fmt(lineTotal)}`);
    });
  }

  if(entranceQty>0){
    lines.push(`í˜„ê´€ë¡¤: ${entranceTypeLabel(entranceType)} / ${entranceSizeLabel(entranceSize)} / ${entranceQty}ê°œ`);
    lines.push(`- ë‹¨ê°€(ìë™): ${fmt(entranceUnit)} / í•©ê³„: ${fmt(entranceConsumer)}`);
    lines.push(`* ê° íŒŒì´í”„ ì‘ì—… í•„ìš” ì‹œ ë¹„ìš© ì¶”ê°€`);
  }

  if(alSM+alL>0){
    lines.push(`ì•Œë¯¸ëŠ„ í‹€ ì œì‘:`);
    if(alSM>0) lines.push(`- ì†Œ/ì¤‘ ${alSM}ê°œ / ë‹¨ê°€ ${fmt(alUnitSM)} / í•©ê³„ ${fmt(alUnitSM * alSM)}`);
    if(alL>0)  lines.push(`- ëŒ€ì°½ ${alL}ê°œ / ë‹¨ê°€ ${fmt(alUnitL)} / í•©ê³„ ${fmt(alUnitL * alL)}`);
  }

  if(hsSM+hsL2>0){
    lines.push(`í•˜ì´ìƒ¤ì‹œ í‹€ ì œì‘:`);
    if(hsSM>0) lines.push(`- ì†Œ/ì¤‘ ${hsSM}ê°œ / ë‹¨ê°€ ${fmt(hsUnitSM)} / í•©ê³„ ${fmt(hsUnitSM * hsSM)}`);
    if(hsL2>0) lines.push(`- ëŒ€ì°½ ${hsL2}ê°œ / ë‹¨ê°€ ${fmt(hsUnitL)} / í•©ê³„ ${fmt(hsUnitL * hsL2)}`);
  }

  const qtyDiscTxt = windowSafetyQtyDiscountApplied
    ? `${Math.round(windowSafetyQtyDiscountRate*100)}% ì ìš©`
    : "ë¯¸ì ìš©";

  lines.push(`ì°½ë¬¸í˜•+ì•ˆì „ë§ í•©ì‚° ê°œìˆ˜: ${windowSafetyQty}ê°œ / 4ê°œ ì´ìƒ 5% ì¶”ê°€ í• ì¸: ${qtyDiscTxt}`);
  lines.push(`ì†Œë¹„ìê°€ê²©(ì •ê°€): ${fmt(totalConsumer)}`);
  lines.push(`ì˜ˆì•½/ì˜ìˆ˜ì¦ë¦¬ë·° 10%: ${reviewDiscountOn ? "ì ìš©(ì•ˆì „ë§ ì œì™¸)" : "ë¯¸ì ìš©"}`);
  if(reviewDiscountOn){
    lines.push(`- ë¦¬ë·°í• ì¸ ì ìš©ëŒ€ìƒ í•©ê³„: ${fmt(eligibleConsumer)} (ì•ˆì „ë§ ${fmt(safetyConsumer)} ì œì™¸)`);
  }
  lines.push(`ìµœì¢… ìë™ê²¬ì : ${fmt(totalFinal)}`);
  lines.push(`ë©”ëª¨: ${memo || "ì—†ìŒ"}`);

  return "ìë™ê²¬ì  ë³´ê³  ì—°ë½ë“œë ¤ìš”.\n" + lines.join("\n");
}

function calc(){
  const reviewDiscountOn = $("discount10").checked;

  const meshKey = $("meshType").value;
  const cntS = clampInt(parseFloat($("cntS").value));
  const cntM = clampInt(parseFloat($("cntM").value));
  const cntL = clampInt(parseFloat($("cntL").value));

  // 1) ì°½ë¬¸í˜•(ì†Œë¹„ì)
  const up = CONFIG.UNIT_PRICE_WINDOW[meshKey] || CONFIG.UNIT_PRICE_WINDOW.micro;
  const windowConsumer = (up.S * cntS) + (up.M * cntM) + (up.L * cntL);
  const windowQty = (cntS + cntM + cntL);

  // 2) ì•ˆì „ë§(ì†Œë¹„ì) - ë¦¬ë·° 10% ì œì™¸
  const safetyConsumer = safetySumTotal();
  const safetyQty = safetySumQty();

  // âœ… ì°½ë¬¸í˜• + ì•ˆì „ë§ í•©ì‚° 4ê°œ ì´ìƒì´ë©´ 5% ì¶”ê°€ í• ì¸ (ì´ ë‘ í•­ëª©ì—ë§Œ)
  const windowSafetyQty = windowQty + safetyQty;
  const windowSafetyQtyDiscountApplied = (windowSafetyQty >= CONFIG.WINDOW_SAFETY_QTY_DISCOUNT_MIN);
  const windowSafetyQtyDiscountRate = windowSafetyQtyDiscountApplied ? CONFIG.WINDOW_SAFETY_QTY_DISCOUNT_RATE : 0;

  const windowAfterQty = windowConsumer * (1 - windowSafetyQtyDiscountRate);
  const safetyAfterQty = safetyConsumer * (1 - windowSafetyQtyDiscountRate);

  // 3) í˜„ê´€ë¡¤: ê°œìˆ˜ë³„ ë‹¨ê°€ (âœ… ë¦¬ë·° 10% ì œì™¸)
  const entranceType = $("entranceType").value;
  const entranceSize = $("entranceSize").value;
  const entranceQty = clampInt(parseFloat($("entranceQty").value));
  let entranceConsumer = 0;
  let entranceUnit = 0;
  if(entranceQty > 0){
    entranceUnit = entranceUnitPrice(entranceType, entranceSize, entranceQty);
    entranceConsumer = entranceUnit * entranceQty;
  }

  // 4) ì•Œë¯¸ëŠ„ í‹€: ê°œìˆ˜ë³„ ë‹¨ê°€ (âœ… ë¦¬ë·° 10% ì œì™¸)
  const alSM = clampInt(parseFloat($("alSM").value));
  const alL  = clampInt(parseFloat($("alL").value));
  const alUnitSM = frameUnitPriceSM(alSM);
  const alUnitL  = frameUnitPriceL(alL);
  const alConsumer = (alUnitSM * alSM) + (alUnitL * alL);

  // 5) í•˜ì´ìƒ¤ì‹œ í‹€: ê°œìˆ˜ë³„ ë‹¨ê°€ (âœ… ë¦¬ë·° 10% ì œì™¸)
  const hsSM = clampInt(parseFloat($("hsSM").value));
  const hsL2 = clampInt(parseFloat($("hsL2").value));
  const hsUnitSM = frameUnitPriceSM(hsSM);
  const hsUnitL  = frameUnitPriceL(hsL2);
  const hsConsumer = (hsUnitSM * hsSM) + (hsUnitL * hsL2);

  // ì´ ì†Œë¹„ìê°€ê²©(ì •ê°€)
  const totalConsumer = windowConsumer + safetyConsumer + entranceConsumer + alConsumer + hsConsumer;

  // âœ… ë¦¬ë·° 10%ëŠ” "ì°½ë¬¸í˜•"ë§Œ ì ìš©
  const windowAfterReview = reviewDiscountOn
    ? (windowAfterQty * (1 - CONFIG.REVIEW_DISCOUNT_RATE))
    : windowAfterQty;

  const any =
    (windowQty + safetyQty + entranceQty + alSM + alL + hsSM + hsL2) > 0;

  // ìµœì¢…
  const totalFinal = any
    ? (windowAfterReview + safetyAfterQty + entranceConsumer + alConsumer + hsConsumer)
    : 0;

  $("resultPrice").textContent = fmt(totalFinal);

  let note = any ? "ì…ë ¥ ê¸°ì¤€ ìë™ê²¬ì ì…ë‹ˆë‹¤." : "ê°œìˆ˜ ì…ë ¥í•˜ë©´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤.";
  if(any){
    const parts = [];
    if(windowSafetyQtyDiscountApplied){
      parts.push(`âœ… ì°½ë¬¸í˜•+ì•ˆì „ë§ 4ê°œ ì´ìƒ 5% ì¶”ê°€ í• ì¸ ì ìš©`);
    }
    if(reviewDiscountOn){
      parts.push(`âœ… ì˜ˆì•½/ì˜ìˆ˜ì¦ 10% í• ì¸ ì ìš© (ì°½ë¬¸í˜•ë§Œ)`);
    }
    if(parts.length) note = parts.join(" / ");
  }
  $("resultNote").textContent = note;

  const eligibleConsumer = windowAfterQty;

  const ctx = {
    totalFinal,
    totalConsumer,
    reviewDiscountOn,
    windowSafetyQtyDiscountApplied,
    windowSafetyQty,
    windowConsumer,
    safetyConsumer,
    entranceConsumer,
    alConsumer,
    hsConsumer,
    eligibleConsumer,
    windowSafetyQtyDiscountRate,
    eligibleAfterAllDiscounts: windowAfterReview,
    entranceQty,
    entranceUnit,
    alSM, alL, hsSM, hsL2,
    alUnitSM, alUnitL, hsUnitSM, hsUnitL
  };

  $("summary").value = buildSummary(ctx);
  return { summary: $("summary").value, any };
}

async function copyText(text){
  try{
    await navigator.clipboard.writeText(text);
    return true;
  }catch(e){
    const ta = $("summary");
    ta.removeAttribute("readonly");
    ta.value = text;
    ta.select();
    ta.setSelectionRange(0, 99999);
    const ok = document.execCommand("copy");
    ta.setAttribute("readonly","readonly");
    return ok;
  }
}

function applyStep(targetId, delta){
  const el = $(targetId);
  if(!el) return;
  const cur = clampInt(parseFloat(el.value));
  const next = Math.max(0, cur + delta);
  el.value = next;
  el.dispatchEvent(new Event("input", { bubbles:true }));
}

function openModal(msg){
  $("modalBody").textContent = msg;
  $("modalBack").style.display = "flex";
  $("modalBack").setAttribute("aria-hidden","false");
}
function closeModal(){
  $("modalBack").style.display = "none";
  $("modalBack").setAttribute("aria-hidden","true");
}

function updateSafetyGaugeUI(){
  const kind = $("safetyKind").value;
  const g = safetyGaugeForKind(kind);
  $("safetyGauge").value = `${g}mm`;
  safetyPreview();
}

function safetyPreview(){
  const kind = $("safetyKind").value;
  const gauge = safetyGaugeForKind(kind);
  const w = clampInt(parseFloat($("safetyW").value));
  const h = clampInt(parseFloat($("safetyH").value));
  const qty = clampInt(parseFloat($("safetyQty").value));

  if(w<=0 || h<=0 || qty<=0){
    $("safetyPreview").textContent = "";
    return;
  }

  const { rounded } = safetyRoundedM2FromMM(w, h);
  if(rounded > CONFIG.SAFETY_MAX_M2){
    $("safetyPreview").textContent = "âš ï¸ ì…ë ¥ ë²”ìœ„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤ â€” ì˜¤í”ˆì±„íŒ… ë¬¸ì˜";
    return;
  }

  const unit = safetyPriceByGaugeM2(gauge, rounded);
  if(unit == null){
    $("safetyPreview").textContent = "âš ï¸ ê¸ˆì•¡ ê³„ì‚°ì´ ì–´ë ¤ì›Œìš” â€” ì˜¤í”ˆì±„íŒ… ë¬¸ì˜";
    return;
  }

  const lineTotal = unit * qty;
  $("safetyPreview").textContent =
    `ë¯¸ë¦¬ë³´ê¸°: ${safetyKindLabel(kind)} ${gauge}mm / ${w}Ã—${h}mm / ${fmt(unit)}Ã—${qty} = ${fmt(lineTotal)}`;
}

function wire(){
  document.addEventListener("click", (e)=>{
    const btn = e.target.closest("[data-step][data-target]");
    if(btn){
      const delta = parseInt(btn.getAttribute("data-step"), 10);
      const targetId = btn.getAttribute("data-target");
      applyStep(targetId, delta);
      if(targetId === "safetyQty") safetyPreview();
      calc();
      return;
    }

    const del = e.target.closest("[data-del-safety]");
    if(del){
      const id = del.getAttribute("data-del-safety");
      safetyItems = safetyItems.filter(x => x.id !== id);
      renderSafetyList();
      calc();
      return;
    }
  });

  [
    "discount10",
    "meshType","cntS","cntM","cntL","memo",
    "entranceType","entranceSize","entranceQty",
    "alSM","alL",
    "hsSM","hsL2"
  ].forEach(id => $(id).addEventListener("input", calc));

  ["safetyW","safetyH","safetyQty"].forEach(id=>{
    $(id).addEventListener("input", ()=>{
      if(id === "safetyQty"){
        $(id).value = clampInt(parseFloat($(id).value));
      }
      safetyPreview();
    });
  });

  $("safetyKind").addEventListener("input", updateSafetyGaugeUI);

  $("btnAddSafety").addEventListener("click", ()=>{
    const kind = $("safetyKind").value;
    const gauge = safetyGaugeForKind(kind);

    const w = clampInt(parseFloat($("safetyW").value));
    const h = clampInt(parseFloat($("safetyH").value));
    const qty = clampInt(parseFloat($("safetyQty").value));

    if(w<=0 || h<=0){ toast("ê°€ë¡œ/ì„¸ë¡œ(mm)ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
    if(qty<=0){ toast("ìˆ˜ëŸ‰ì„ 1ê°œ ì´ìƒìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }

    const { raw, rounded } = safetyRoundedM2FromMM(w, h);
    if(rounded > CONFIG.SAFETY_MAX_M2){ toast("ì…ë ¥ ë²”ìœ„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì˜¤í”ˆì±„íŒ… ë¬¸ì˜"); return; }

    const unit = safetyPriceByGaugeM2(gauge, rounded);
    if(unit == null){ toast("ê¸ˆì•¡ ê³„ì‚°ì´ ì–´ë ¤ì›Œìš”. ì˜¤í”ˆì±„íŒ… ë¬¸ì˜"); return; }

    safetyItems.push({
      id: String(Date.now()) + "_" + Math.random().toString(16).slice(2),
      kind, gauge, w, h, qty,
      rawM2: raw, roundedM2: rounded,
      unitPrice: unit
    });

    renderSafetyList();
    calc();
    toast("ì¶”ê°€ ì™„ë£Œ");

    $("safetyW").value = 0;
    $("safetyH").value = 0;
    safetyPreview();
  });

  $("btnCopy").addEventListener("click", async ()=>{
    const { summary } = calc();
    const ok = await copyText(summary);
    toast(ok ? "ë³µì‚¬ ì™„ë£Œ! ì˜¤í”ˆì±„íŒ…ì— ë¶™ì—¬ë„£ê¸° í•˜ë©´ ë" : "ë³µì‚¬ ì‹¤íŒ¨ â€” ìš”ì•½ì„ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•´ì£¼ì„¸ìš”");
  });

  $("btnReset").addEventListener("click", ()=>{
    $("discount10").checked = false;

    $("meshType").value = "micro";
    $("cntS").value = 0; $("cntM").value = 0; $("cntL").value = 0;
    $("memo").value = "";

    $("safetyKind").value = "crime";
    updateSafetyGaugeUI();
    $("safetyW").value = 0;
    $("safetyH").value = 0;
    $("safetyQty").value = 0;
    safetyItems = [];
    renderSafetyList();
    safetyPreview();

    $("entranceType").value = "normal";
    $("entranceSize").value = "under";
    $("entranceQty").value = 0;

    $("alSM").value = 0; $("alL").value = 0;
    $("hsSM").value = 0; $("hsL2").value = 0;

    calc();
    toast("ì´ˆê¸°í™” ì™„ë£Œ");
  });

  $("btnGoQuote").addEventListener("click", ()=>{
    $("dWindow").open = true;
    $("quoteSection").scrollIntoView({ behavior:"smooth", block:"start" });
    setTimeout(()=> $("meshType").focus(), 450);
  });

  $("kakaoConsultBtn").addEventListener("click", async ()=>{
    const { summary, any } = calc();
    if(!any){
      openModal("ì•„ì§ ì…ë ¥ëœ í•­ëª©ì´ ì—†ì–´ìš”. ì•„ë˜ì—ì„œ ì…ë ¥ í›„ ë‹¤ì‹œ â€˜ìƒë‹´ë°›ê¸°â€™ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
      $("btnGoKakao").style.display = "none";
      $("quoteSection").scrollIntoView({ behavior:"smooth", block:"start" });
      $("dWindow").open = true;
      return;
    }

    const ok = await copyText(summary);
    $("btnGoKakao").style.display = "inline-flex";
    if(ok){
      openModal("ë³µì‚¬ ì™„ë£Œ! ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™í•˜ë©´ ì±„íŒ…ì°½ì— â€˜ë¶™ì—¬ë„£ê¸°â€™ë§Œ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.");
      setTimeout(()=> window.open(KAKAO_URL, "_blank", "noopener"), 650);
    }else{
      openModal("ë³µì‚¬ê°€ ë§‰íŒ ê¸°ê¸°ì˜ˆìš”. ì•„ë˜ ìš”ì•½ì„ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•œ ë’¤, ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™í•´ì£¼ì„¸ìš”.");
    }
  });

  $("btnGoKakao").addEventListener("click", ()=> window.open(KAKAO_URL, "_blank", "noopener"));
  $("btnCloseModal").addEventListener("click", closeModal);
  $("modalBack").addEventListener("click", (e)=>{ if(e.target === $("modalBack")) closeModal(); });

  updateSafetyGaugeUI();
  calc();
}
wire();

/* ===================== ì œí’ˆ ë³´ê¸°(ë¦¬ìŠ¤íŠ¸ â†’ ìƒì„¸1ê°œ) JS ===================== */
(function initProductGuide(){
  const back = $("pBack");
  const btnOpen = $("btnOpenProducts");
  const btnClose = $("btnCloseProducts");
  const listBox = $("pList");
  const detailBox = $("pDetail");

  const badge = $("pBadge2");
  const name = $("pName2");
  const one = $("pOne2");
  const pros = $("pPros");
  const cons = $("pCons");

  const pickWrap = $("pPick");
  const pickTitle = $("pPickTitle");
  const seg = $("pSeg");
  const pickNote = $("pPickNote");

  const btnBack = $("btnBackToList");
  const btnApply = $("btnApplyToQuote");
  const btnGoQuote = $("btnGoQuoteFromProduct");

  if(!back || !btnOpen || !listBox || !detailBox) return;

  const PRODUCT = {
    micro: {
      badge: "ğŸªŸ ì°½ë¬¸í˜•",
      name: "ë¯¸ì„¸ë°©ì¶©ë§",
      one: "ì´ˆíŒŒë¦¬Â·ë‚ íŒŒë¦¬ ê°™ì€ ì‘ì€ ë²Œë ˆ ìœ ì…ì´ ì‹ ê²½ ì“°ì¼ ë•Œ ê°€ì¥ ë¬´ë‚œí•œ ì„ íƒì´ì—ìš”.",
      pros: ["ì‘ì€ ë²Œë ˆ ìœ ì… ì²´ê° í™•ì‹¤", "ë¨¼ì§€Â·ê½ƒê°€ë£¨ ë¶€ë‹´ì´ ì¤„ì–´ ì°½ ì—´ê¸° í¸í•¨", "ì €ì¸µ/ê°•ê°€Â·í•´ì•ˆê°€ í™˜ê²½ì—ì„œ íŠ¹íˆ ì²´ê°"],
      cons: ["í™˜ê²½ì— ë”°ë¼ í†µí’ì´ ì‚´ì§ ëœí•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆìŒ", "ë‚ ì¹´ë¡œìš´ ë„êµ¬ë‚˜ ë¶ˆì— ì•½í•¨,"],
      optionUI: null,
      apply(){
        $("meshType").value = "micro";
        $("meshType").dispatchEvent(new Event("input",{bubbles:true}));
        $("dWindow").open = true;
      }
    },
    hydro_micro: {
      badge: "ğŸ’§ ì°½ë¬¸í˜•",
      name: "ë°œìˆ˜ì½”íŒ… ë¯¸ì„¸ë°©ì¶©ë§",
      one: "ì¥ë§ˆì² ì— ìµœê³  íš¨ìœ¨/ë¬¼ì„ ë¨¸ê¸ˆì§€ ì•Šì•„ ê´€ë¦¬ê°€ í¸í•¨.",
      pros: ["ì˜¤ì—¼Â·ë¬¼ë•Œê°€ ëœ ë‹¬ë¼ë¶™ëŠ” í¸(ê´€ë¦¬ í¸í•¨)", "ë¯¸ì„¸ë§ ê¸°ëŠ¥ì€ ê·¸ëŒ€ë¡œ", "ìê°€ì„¸ì²™ì´ ê°€ëŠ¥"],
      cons: ["ì¼ë°˜ ë¯¸ì„¸ë§ ëŒ€ë¹„ ë‹¨ê°€ê°€ ì˜¬ë¼ê°", "ìƒí™© ë”°ë¼ ì½”íŒ… ìœ ì§€ ê´€ë¦¬ëŠ” í•„ìš”", "ë‚ ì¹´ë¡œìš´ ë„êµ¬ë‚˜ ë¶ˆì— ì•½í•¨,"],
      optionUI: null,
      apply(){
        $("meshType").value = "hydro_micro";
        $("meshType").dispatchEvent(new Event("input",{bubbles:true}));
        $("dWindow").open = true;
      }
    },
    black_stainless_micro: {
      badge: "ğŸ¾ ì°½ë¬¸í˜•",
      name: "ë¸”ë™ìŠ¤í… ë¯¸ì„¸ë°©ì¶©ë§",
      one: "ë°˜ë ¤ë¬˜/ë°˜ë ¤ê²¬ í‚¤ìš°ëŠ” ì§‘ì—ì„œ ì¸ê¸°ê°€ ì—„ì²­ ë§ì•„ìš”. ì‹œì•¼ë„ ê¹”ë”í•´ì„œ ë§Œì¡±ë„ê°€ ë†’ì€ í¸!",
      pros: ["ì„ ëª…í•¨ (ë‚œë°˜ì‚¬ ì ìŒ)", "ë‚´êµ¬ì„±/íƒ„ì„±ì´ ì¢‹ì•„ ì„ í˜¸ë„ ë†’ìŒ", "ë°˜ë ¤ë™ë¬¼ ìˆëŠ” ì§‘ì—ì„œ ë¬¸ì˜/ì„ íƒ ë¹„ìœ¨ ë†’ìŒ"],
      cons: ["ê°€ê²©ëŒ€ê°€ ê°€ì¥ ë†’ì€ í¸", "30ë©”ì‹œëŠ” ë°”ëŒì´ ì˜ ì•ˆ í†µí•¨"],
      optionUI: null,
      apply(){
        $("meshType").value = "black_stainless_micro";
        $("meshType").dispatchEvent(new Event("input",{bubbles:true}));
        $("dWindow").open = true;
      }
    },
    entrance: {
      badge: "ğŸšª í˜„ê´€",
      name: "í˜„ê´€ ë¡¤ë°©ì¶©ë§ (ì¼ë°˜/ë¯¸ì„¸)",
      one: "ë²„íŠ¼ í•œë²ˆìœ¼ë¡œ ì—¬ë‹«ê¸° í¸í•˜ê³ , ê°œìˆ˜ ëŠ˜ë©´ ë‹¨ê°€ ìë™ìœ¼ë¡œ ë‚´ë ¤ê°€ê²Œ ì„¸íŒ…ë¼ ìˆì–´ìš”.",
      pros: ["ì¶œì… í¸í•¨(ë¡¤ ë°©ì‹)", "ê°œìˆ˜ë³„ ë‹¨ê°€ ìë™ ë°˜ì˜(ê²¬ì  ëª…í™•)", "ì¼ë°˜/ë¯¸ì„¸ ì¤‘ ì„ íƒ ê°€ëŠ¥"],
      cons: ["í˜„ê´€ êµ¬ì¡°/ê°„ì„­ì— ë”°ë¼ ì‘ì—… ë‚œì´ë„ ì°¨ì´", "íŒŒì´í”„ ì‘ì—… í•„ìš” ì‹œ ì¶”ê°€ ë¹„ìš© ë°œìƒ ê°€ëŠ¥"],
      optionUI: {
        title: "ì¢…ë¥˜ ì„ íƒ",
        note: "ì„ íƒí•˜ë©´ ì•„ë˜ â€˜ì´ê±¸ë¡œ ê²¬ì í•˜ê¸°â€™ ëˆ„ë¥¼ ë•Œ ê²¬ì  í•­ëª©ì´ ê°™ì´ ë§ì¶°ì ¸ìš”.",
        buttons: [
          { key:"normal", label:"ì¼ë°˜", on(){
              $("entranceType").value = "normal";
              $("entranceType").dispatchEvent(new Event("input",{bubbles:true}));
            }
          },
          { key:"micro", label:"ë¯¸ì„¸", on(){
              $("entranceType").value = "micro";
              $("entranceType").dispatchEvent(new Event("input",{bubbles:true}));
            }
          }
        ],
        defaultKey: "normal"
      },
      apply(){
        // í˜„ì¬ ì„ íƒëœ entranceType ê·¸ëŒ€ë¡œ ìœ ì§€
        $("dEntrance").open = true;
      }
    },
    pj: {
      badge: "ğŸ§© PJ",
      name: "PJ ë¡¤ë°©ì¶©ë§",
      one: "PJì°½ì€ ì¼ë°˜ ë°©ì¶©ë§ì„ ì„¤ì¹˜í•  ìˆ˜ ì—†ì–´ì„œ, ë¡¤ í˜•ì‹ìœ¼ë¡œ ì œì‘ë˜ëŠ” ë°©ì¶©ë§ì„ ë§í•´ìš”. (ë³„ê±° ì—†ê³  â€˜ì „ìš©â€™ì…ë‹ˆë‹¤)",
      pros: ["PJì°½ êµ¬ì¡°ì— ë§ì¶° ê¹”ë”í•˜ê²Œ ì œì‘", "ì¼ë°˜ë§ ë¶ˆê°€í•œ ì°½ì— ìœ ì¼í•œ í•´ë²•", "í˜„ì¥ ì¡°ê±´ ë§ì¶° ì•ˆë‚´ ê°€ëŠ¥"],
      cons: ["í˜„ì¥ ì¡°ê±´ì´ ë‹¤ì–‘í•´ì„œ â€˜ë³„ë„ ê²¬ì â€™ì´ ì •í™•í•¨", "ì¹˜ìˆ˜/êµ¬ì¡° í™•ì¸ì´ í•„ìš”"],
      optionUI: null,
      apply(){
        $("dPJ").open = true;
      }
    },
    safety: {
      badge: "ğŸ›¡ï¸ ì•ˆì „",
      name: "ì•ˆì „ë°©ì¶©ë§ (0.7 / 0.4)",
      one: "0.7ì€ ì €ì¸µ ë°©ë²”ì— ì¢‹ê³ , 0.4ëŠ” 3ì¸µ ì´ìƒë¶€í„° ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥í•´ìš”. 0.4ë„ ì¼ë°˜ í˜ìœ¼ë¡œëŠ” ì‰½ê²Œ íƒˆê±° ì•ˆ ë©ë‹ˆë‹¤.",
      pros: ["ì €ì¸µ ë°©ë²”(0.7) / 3ì¸µâ†‘ ë²”ìš©(0.4) ì„ íƒ ê°€ëŠ¥", "ì•„ê¸°/ë°˜ë ¤ë™ë¬¼ ìˆëŠ” ì§‘ì— ì²´ê° í¼", "ë¬¼ë¦¬ì  ì°¨ë‹¨ë ¥ ìµœê³  ìˆ˜ì¤€"],
      cons: ["ë¦¬ë·° 10% í• ì¸ ì ìš© ì œì™¸(ì •ì±…)", "í”„ë ˆì„ê¹Œì§€ ë§ì¶¤ì´ë¼ ê°€ê²©ì´ ë†’ìŒ"],
      optionUI: {
        title: "ì¢…ë¥˜ ì„ íƒ",
        note: "ë°©ë²”(0.7) / ì¶”ë½(0.4) ì„ íƒí•˜ë©´ ì•ˆì „ë§ ì„¹ì…˜ì´ ìë™ìœ¼ë¡œ ë§ì¶°ì ¸ìš”.",
        buttons: [
          { key:"crime", label:"ë°©ë²” 0.7", on(){
              $("safetyKind").value = "crime";
              $("safetyKind").dispatchEvent(new Event("input",{bubbles:true}));
            }
          },
          { key:"fall", label:"ì¶”ë½ 0.4", on(){
              $("safetyKind").value = "fall";
              $("safetyKind").dispatchEvent(new Event("input",{bubbles:true}));
            }
          }
        ],
        defaultKey: "crime"
      },
      apply(){
        $("dSafety").open = true;
      }
    }
  };

  let currentKey = "micro";

  function openBack(){
    back.style.display = "flex";
    back.setAttribute("aria-hidden","false");
  }
  function closeBack(){
    back.style.display = "none";
    back.setAttribute("aria-hidden","true");
    showList();
  }
  function showList(){
    listBox.style.display = "flex";
    detailBox.style.display = "none";
  }
  function showDetail(key){
    currentKey = key;
    const p = PRODUCT[key];
    if(!p) return;

    badge.textContent = p.badge;
    name.textContent = p.name;
    one.textContent = p.one;

    pros.innerHTML = "";
    cons.innerHTML = "";
    (p.pros || []).forEach(t=>{
      const li = document.createElement("li");
      li.textContent = t;
      pros.appendChild(li);
    });
    (p.cons || []).forEach(t=>{
      const li = document.createElement("li");
      li.textContent = t;
      cons.appendChild(li);
    });

    // ì˜µì…˜ UI ì²˜ë¦¬
    seg.innerHTML = "";
    if(p.optionUI){
      pickWrap.style.display = "block";
      pickTitle.textContent = p.optionUI.title || "ì˜µì…˜ ì„ íƒ";
      pickNote.textContent = p.optionUI.note || "";

      const defKey = p.optionUI.defaultKey;
      p.optionUI.buttons.forEach(btn=>{
        const b = document.createElement("button");
        b.type = "button";
        b.textContent = btn.label;
        if(btn.key === defKey) b.classList.add("isOn");
        b.addEventListener("click", ()=>{
          [...seg.querySelectorAll("button")].forEach(x=>x.classList.remove("isOn"));
          b.classList.add("isOn");
          try{ btn.on(); }catch(e){}
          calc();
        });
        seg.appendChild(b);
      });

      // default ì ìš©(ì²˜ìŒ ë“¤ì–´ê°ˆ ë•Œ)
      const def = p.optionUI.buttons.find(x => x.key === defKey);
      if(def && typeof def.on === "function"){
        try{ def.on(); }catch(e){}
      }
      calc();
    }else{
      pickWrap.style.display = "none";
      pickTitle.textContent = "";
      pickNote.textContent = "";
    }

    listBox.style.display = "none";
    detailBox.style.display = "block";
  }

  btnOpen.addEventListener("click", openBack);
  btnClose.addEventListener("click", closeBack);
  back.addEventListener("click", (e)=>{ if(e.target === back) closeBack(); });
  document.addEventListener("keydown", (e)=>{ if(e.key === "Escape" && back.style.display === "flex") closeBack(); });

  listBox.addEventListener("click", (e)=>{
    const item = e.target.closest("[data-prod]");
    if(!item) return;
    const key = item.getAttribute("data-prod");
    showDetail(key);
  });

  btnBack.addEventListener("click", showList);

  btnGoQuote.addEventListener("click", ()=>{
    closeBack();
    $("quoteSection").scrollIntoView({ behavior:"smooth", block:"start" });
    setTimeout(()=> $("meshType").focus(), 450);
  });

  btnApply.addEventListener("click", ()=>{
    const p = PRODUCT[currentKey];
    if(p && typeof p.apply === "function"){
      p.apply();
      calc();
    }
    closeBack();
    $("quoteSection").scrollIntoView({ behavior:"smooth", block:"start" });
  });

  // ì´ˆê¸° ìƒíƒœ
  showList();
})();
</script>
</body>
</html>






