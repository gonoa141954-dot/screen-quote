<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë°©ì¶©ë§ ìë™ê²¬ì  | ë°©ì¶©ë§ì‹œê³µì†Œ</title>

  <meta name="description" content="30ì´ˆ ì…€í”„ê²¬ì  Â· ìš”ì•½ ìë™ë³µì‚¬ í›„ ì˜¤í”ˆì±„íŒ… ìƒë‹´" />
  <meta property="og:title" content="ë°©ì¶©ë§ ìë™ê²¬ì  | ë°©ì¶©ë§ì‹œê³µì†Œ" />
  <meta property="og:description" content="ê°œìˆ˜ë§Œ ì…ë ¥í•˜ë©´ ì •í™• ê¸ˆì•¡ í™•ì¸ Â· ìƒë‹´ë°›ê¸° ëˆ„ë¥´ë©´ ê²¬ì ìš”ì•½ ìë™ë³µì‚¬" />
  <meta property="og:image" content="https://gonoa141954-dot.github.io/screen-quote/hero.png" />

  <style>
    :root{
      --bg:#ffffff;
      --bg2:#f7f8fb;
      --card:#ffffff;
      --line:rgba(15,23,42,.10);
      --text:#0f172a;
      --muted:rgba(15,23,42,.65);
      --muted2:rgba(15,23,42,.45);

      --brand:#2563eb;
      --brand2:#06b6d4;
      --good:#16a34a;

      --shadow: 0 18px 45px rgba(15,23,42,.10);
      --shadow2: 0 10px 28px rgba(15,23,42,.08);
      --r:22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 0% 0%, rgba(37,99,235,.10), transparent 60%),
        radial-gradient(900px 500px at 100% 0%, rgba(6,182,212,.10), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:980px;margin:0 auto;padding:18px 16px 140px;}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:6px 0 14px;}
    .brand{display:flex; flex-direction:column; gap:2px;}
    .brand b{font-size:15px; letter-spacing:-0.2px;}
    .brand span{font-size:12px; color:var(--muted);}
    .status{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.70);
      box-shadow:var(--shadow2);
      font-size:12px; color:var(--muted);
      white-space:nowrap;
    }
    .dot{width:9px;height:9px;border-radius:999px;background:var(--good);box-shadow:0 0 0 4px rgba(22,163,74,.18);}

    .hero{
      border:1px solid var(--line);
      border-radius:var(--r);
      overflow:hidden;
      background:rgba(255,255,255,.82);
      box-shadow:var(--shadow);
    }
    .heroGrid{display:grid; grid-template-columns:1fr;}
    @media (min-width:900px){ .heroGrid{grid-template-columns: 1.15fr .85fr;} }
    .heroMedia{position:relative;min-height:260px;background:#eef2ff;}
    .heroMedia img{
      width:100%; height:100%;
      object-fit:cover; display:block;
      filter:saturate(1.08) contrast(1.04);
    }
    .heroMedia::after{
      content:""; position:absolute; inset:0;
      background:linear-gradient(to top, rgba(255,255,255,.95), rgba(255,255,255,.10) 55%, rgba(255,255,255,0));
      pointer-events:none;
    }
    .heroContent{padding:18px;display:flex;flex-direction:column;gap:12px;}
    .kicker{
      display:inline-flex; align-items:center; gap:8px; width:max-content;
      padding:8px 10px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(37,99,235,.07);
      color:rgba(37,99,235,.95);
      font-weight:1000; font-size:12px;
    }
    .title{margin:0;font-size:22px;letter-spacing:-0.6px;line-height:1.15;font-weight:1000;}
    .sub{margin:0;color:var(--muted);font-size:13px;line-height:1.55;}
    .heroBtns{display:flex;flex-wrap:wrap;gap:10px;margin-top:2px;}
    .btn{
      border:1px solid var(--line);
      background:#fff; color:var(--text);
      padding:12px 14px; border-radius:16px;
      font-weight:1000; font-size:14px;
      cursor:pointer; min-height:46px;
      display:inline-flex; align-items:center; justify-content:center;
      box-shadow: 0 10px 18px rgba(15,23,42,.06);
      transition:transform .08s ease;
    }
    .btnPrimary{
      border-color:transparent;
      background:linear-gradient(135deg, var(--brand), var(--brand2));
      color:white;
      box-shadow: 0 16px 30px rgba(37,99,235,.18);
    }
    .btnSoft{background:rgba(15,23,42,.04);}
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0px)}

    .featureBar{
      margin-top:14px;
      border:1px solid var(--line);
      border-radius:var(--r);
      background:rgba(255,255,255,.92);
      box-shadow:var(--shadow2);
      padding:12px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }
    .featureItem{
      flex:1 1 190px;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:18px;
      background:rgba(15,23,42,.03);
      border:1px solid rgba(15,23,42,.08);
    }
    .featureIcon{
      width:36px;height:36px;
      border-radius:14px;
      display:grid;place-items:center;
      background:rgba(37,99,235,.10);
      border:1px solid rgba(37,99,235,.18);
      color:rgba(37,99,235,.95);
      font-weight:1000;
      flex:0 0 auto;
    }
    .featureText b{
      display:block;
      font-weight:1000;
      font-size:13px;
      letter-spacing:-0.2px;
    }
    .featureText span{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin-top:2px;
      line-height:1.35;
    }

    .section{
      margin-top:14px;
      border:1px solid var(--line);
      border-radius:var(--r);
      background:rgba(255,255,255,.92);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .sectionHead{
      padding:16px 16px 12px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(180deg, rgba(37,99,235,.06), rgba(255,255,255,0));
    }
    .sectionHead h2{margin:0;font-size:16px;font-weight:1000;letter-spacing:-0.2px;}
    .sectionHead .desc{margin:6px 0 0;color:var(--muted);font-size:12.8px;line-height:1.5;}
    .sectionBody{padding:14px 16px 16px;}

    .row{display:grid;grid-template-columns:1fr;gap:10px;}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px;}
    input,select,textarea{
      width:100%;
      border-radius:16px;
      border:1px solid var(--line);
      background:#fff;
      color:var(--text);
      padding:12px 12px;
      font-size:14px;
      outline:none;
    }
    input:focus,select:focus,textarea:focus{
      border-color: rgba(37,99,235,.35);
      box-shadow: 0 0 0 4px rgba(37,99,235,.12);
    }
    textarea{min-height:150px;resize:vertical;line-height:1.5;}
    .note{font-size:12.5px;color:var(--muted);line-height:1.5;}

    .chip{
      display:flex; gap:10px; align-items:flex-start;
      border:1px solid var(--line);
      background:rgba(15,23,42,.03);
      border-radius:18px;
      padding:12px;
    }
    .chip input{width:auto;margin-top:2px}
    .chip b{font-weight:1000}

    details{
      border:1px solid var(--line);
      border-radius:18px;
      overflow:hidden;
      background:#fff;
      box-shadow: var(--shadow2);
    }
    summary{
      list-style:none;
      cursor:pointer;
      padding:14px 12px;
      font-weight:1000;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      background: linear-gradient(180deg, rgba(15,23,42,.02), rgba(255,255,255,0));
    }
    summary::-webkit-details-marker{display:none;}
    .chev{color:var(--muted2); font-weight:1000;}
    .detailBody{padding:12px;border-top:1px solid var(--line);background:#fff;}

    .result{
      margin-top:14px;
      border:1px solid var(--line);
      border-radius:22px;
      background:linear-gradient(180deg, rgba(37,99,235,.06), rgba(255,255,255,0));
      box-shadow: var(--shadow);
      padding:14px;
    }
    .price{font-size:28px;font-weight:1000;letter-spacing:-0.6px;margin:0;}
    .resultMeta{margin:6px 0 10px;color:var(--muted);font-size:12.5px;line-height:1.5;}
    .btnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;}
    .toast{margin-top:8px;color:var(--muted);font-size:12px;min-height:16px;}

    .highlight{border-left:6px solid #FEE500;background:rgba(254,229,0,.22);}
    .highlightTitle{font-weight:1000;font-size:14px;letter-spacing:-0.2px;}

    .kakaoSticky{
      position:fixed;left:14px;right:14px;bottom:14px;
      z-index:50;max-width:980px;margin:0 auto;
    }
    .kakaoBtn{
      width:100%;
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:12px 14px;border-radius:20px;
      background:#FEE500;color:#191919;
      border:1px solid rgba(0,0,0,.10);
      box-shadow: 0 18px 44px rgba(15,23,42,.18);
      cursor:pointer;
    }
    .kLeft{display:flex;gap:12px;align-items:center;}
    .kBadge{
      width:40px;height:40px;border-radius:999px;
      display:grid;place-items:center;
      background:#191919;color:#FEE500;font-weight:1000;flex:0 0 auto;
    }
    .kText b{display:block;font-size:14px;font-weight:1000;letter-spacing:-0.2px;}
    .kText span{display:block;font-size:12px;color:rgba(25,25,25,.70);margin-top:2px;}
    .kRight{
      padding:10px 12px;border-radius:14px;
      background:rgba(25,25,25,.10);
      border:1px solid rgba(25,25,25,.14);
      font-weight:1000;font-size:12.5px;white-space:nowrap;
    }

    .modalBack{
      position:fixed;inset:0;
      background:rgba(15,23,42,.45);
      display:none;align-items:center;justify-content:center;
      padding:18px;
      z-index:80;
    }
    .modal{
      width:min(520px, 100%);
      background:#fff;
      border:1px solid var(--line);
      border-radius:22px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modalTop{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(180deg, rgba(254,229,0,.22), rgba(255,255,255,0));
    }
    .modalTop b{font-weight:1000}
    .modalBody{padding:12px 14px 14px;color:var(--muted);font-size:13px;line-height:1.55;}
    .modalBtns{display:flex;gap:10px;padding:0 14px 14px;}
    .modalBtns .btn{flex:1}

    /* stepper */
    .stepper{
      display:grid;
      grid-template-columns:48px 1fr 48px;
      gap:8px;
      align-items:center;
    }
    .stepBtn{
      height:48px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(15,23,42,.04);
      font-weight:1000;
      font-size:18px;
      cursor:pointer;
      display:grid;
      place-items:center;
      user-select:none;
      box-shadow: 0 10px 18px rgba(15,23,42,.06);
      transition:transform .08s ease;
    }
    .stepBtn:hover{transform:translateY(-1px)}
    .stepBtn:active{transform:translateY(0px)}
    .stepInput{
      height:48px;
      text-align:center;
      font-weight:900;
      font-size:16px;
      padding:12px 10px;
    }
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button{ -webkit-appearance:none;margin:0; }
    input[type=number]{ -moz-appearance:textfield; }

    /* safety list */
    .list{
      border:1px solid var(--line);
      background:#fff;
      border-radius:18px;
      overflow:hidden;
      box-shadow:var(--shadow2);
    }
    .listHead{
      display:flex;justify-content:space-between;align-items:center;
      padding:12px 12px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(180deg, rgba(15,23,42,.02), rgba(255,255,255,0));
      gap:10px;
      font-weight:1000;
    }
    .listBody{padding:10px 12px; display:flex; flex-direction:column; gap:8px;}
    .item{
      display:flex; gap:10px; align-items:flex-start; justify-content:space-between;
      border:1px solid rgba(15,23,42,.10);
      background:rgba(15,23,42,.02);
      border-radius:16px;
      padding:10px 10px;
    }
    .item .left{min-width:0;}
    .item b{font-weight:1000}
    .item .meta{font-size:12px;color:var(--muted);margin-top:4px;line-height:1.35;}
    .xBtn{
      border:1px solid rgba(15,23,42,.12);
      background:#fff;
      border-radius:14px;
      padding:8px 10px;
      font-weight:1000;
      cursor:pointer;
      white-space:nowrap;
    }
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
    @media (max-width:520px){ .grid2{grid-template-columns:1fr;} }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <b>ë°©ì¶©ë§ì‹œê³µì†Œ</b>
        <span>ì…€í”„ê²¬ì  Â· ìš”ì•½ ìë™ë³µì‚¬ Â· ì˜¤í”ˆì±„íŒ… ìƒë‹´</span>
      </div>
      <div class="status"><span class="dot"></span> ìƒë‹´ ê°€ëŠ¥</div>
    </div>

    <div class="hero">
      <div class="heroGrid">
        <div class="heroMedia">
          <img src="./hero.png" alt="ë°©ì¶©ë§ ìë™ê²¬ì  ì´ë¯¸ì§€" />
        </div>

        <div class="heroContent">
          <div class="kicker">âš¡ 30ì´ˆ ì…€í”„ê²¬ì </div>
          <h1 class="title">ë°©ì¶©ë§ ìë™ê²¬ì </h1>
          <p class="sub">
            ë°”ì˜ì‹¤ ë•ŒëŠ” <b>ê°œìˆ˜ë§Œ ì…ë ¥</b>í•˜ê³  ê¸ˆì•¡ í™•ì¸í•˜ì„¸ìš”.
            ì•„ë˜ <b>ìƒë‹´ë°›ê¸°</b> ëˆ„ë¥´ë©´ <b>ê²¬ì ìš”ì•½ì´ ìë™ ë³µì‚¬</b>ë©ë‹ˆë‹¤.
          </p>

          <div class="heroBtns">
            <button class="btn btnPrimary" id="btnGoQuote">ì…€í”„ ê²¬ì í•˜ê¸°</button>
            <button class="btn btnSoft" id="btnHow">ì´ìš© ë°©ë²•</button>
          </div>

          <div class="note">
            â€» ì…ë ¥ ê¸°ì¤€ ìë™ê²¬ì ì´ë©°, í˜„ì¥ ìƒí™©ì— ë”°ë¼ ì¶”ê°€ ë°œìƒ ì‹œ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </div>

    <div class="featureBar" id="howSection">
      <div class="featureItem">
        <div class="featureIcon">â‚©</div>
        <div class="featureText">
          <b>ì†Œë¹„ìê°€ê²©</b>
          <span>ì •ê°€ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°</span>
        </div>
      </div>
      <div class="featureItem">
        <div class="featureIcon">â˜</div>
        <div class="featureText">
          <b>ìš”ì•½ ìë™ë³µì‚¬</b>
          <span>ìƒë‹´ ë²„íŠ¼ ëˆ„ë¥´ë©´ ìë™</span>
        </div>
      </div>
      <div class="featureItem">
        <div class="featureIcon">ğŸ“±</div>
        <div class="featureText">
          <b>ëª¨ë°”ì¼ ìµœì </b>
          <span>í°ì—ì„œ ë³´ê¸° ì‰½ê²Œ</span>
        </div>
      </div>
    </div>

    <div class="section" id="quoteSection">
      <div class="sectionHead">
        <h2>ì…€í”„ ê²¬ì </h2>
        <p class="desc">í•„ìš”í•œ í•­ëª©ë§Œ í¼ì³ì„œ ì…ë ¥í•˜ì„¸ìš”.</p>
      </div>

      <div class="sectionBody">
        <div class="highlight" style="border-radius:18px;padding:12px;margin-bottom:12px;border:1px solid rgba(0,0,0,.06);">
          <div class="highlightTitle">âœ… ê°œìˆ˜ì— ë”°ë¥¸ ì°¨ë“± í• ì¸ìœ¨ ì ìš©</div>
          <div class="note" style="margin-top:4px;">5ê°œ ì´ìƒ ì‹œê³µì‹œ í• ì¸ìœ¨ 5í”„ë¡œ ì¶”ê°€ í• ì¸</div>
        </div>

        <div class="chip" style="margin-bottom:12px;">
          <input type="checkbox" id="discount10">
          <div>
            <div><b>ì˜ˆì•½ë¦¬ë·°</b> ë˜ëŠ” <b>ì˜ìˆ˜ì¦ë¦¬ë·°</b> ì•½ì†(10% í• ì¸)</div>
            <div class="note">ì²´í¬í•˜ë©´ ì´ì•¡ì—ì„œ ìë™ìœ¼ë¡œ 10% í• ì¸ ì ìš©ë©ë‹ˆë‹¤. (â€» í˜„ì¬ í™”ë©´ í‘œì‹œëŠ” ì†Œë¹„ìê°€ê²© ê¸°ì¤€)</div>
          </div>
        </div>

        <details id="dWindow">
          <summary><span>ì°½ë¬¸í˜• ë°©ì¶©ë§</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div>
                <label>ë°©ì¶©ë§ ì„ íƒ</label>
                <select id="meshType">
                  <option value="micro">ë¯¸ì„¸ë°©ì¶©ë§</option>
                  <option value="hydro_micro">ë°œìˆ˜ì½”íŒ… ë¯¸ì„¸ë°©ì¶©ë§</option>
                  <option value="black_stainless_micro">ë¸”ë™ìŠ¤í… ë¯¸ì„¸ë°©ì¶©ë§</option>
                </select>
              </div>

              <div>
                <label>ì†Œí˜•(ê°œ)</label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="cntS" aria-label="ì†Œí˜• ê°ì†Œ">âˆ’</button>
                  <input id="cntS" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="cntS" aria-label="ì†Œí˜• ì¦ê°€">ï¼‹</button>
                </div>
              </div>

              <div>
                <label>ì¤‘í˜•(ê°œ) <span class="note">Â· ë†’ì´ 1500 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="cntM" aria-label="ì¤‘í˜• ê°ì†Œ">âˆ’</button>
                  <input id="cntM" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="cntM" aria-label="ì¤‘í˜• ì¦ê°€">ï¼‹</button>
                </div>
              </div>

              <div>
                <label>ëŒ€í˜•(ê°œ) <span class="note">Â· ë†’ì´ 2300 ì´í•˜</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="cntL" aria-label="ëŒ€í˜• ê°ì†Œ">âˆ’</button>
                  <input id="cntL" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="cntL" aria-label="ëŒ€í˜• ì¦ê°€">ï¼‹</button>
                </div>
              </div>

              <div><label>ë©”ëª¨(ì„ íƒ)</label><input id="memo" placeholder="ì˜ˆ: ì €ì¸µ/ì•„ì´ ìˆìŒ/ì´ˆíŒŒë¦¬ ìœ ì… ë“±"></div>
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <details id="dEntrance">
          <summary><span>í˜„ê´€ ë¡¤ë°©ì¶©ë§</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div class="chip">
                <input type="checkbox" id="useEntranceRoll">
                <div>
                  <b>í˜„ê´€ ë¡¤ë°©ì¶©ë§</b> ê²¬ì  ì¶”ê°€
                  <div class="note">ì²´í¬ í›„ ì¢…ë¥˜/ì‚¬ì´ì¦ˆ/ê°œìˆ˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.</div>
                </div>
              </div>

              <div>
                <label>ì¢…ë¥˜ ì„ íƒ</label>
                <select id="entranceType">
                  <option value="normal">í˜„ê´€ ë¡¤ë°©ì¶©ë§</option>
                  <option value="micro">í˜„ê´€ ë¯¸ì„¸ ë¡¤ë°©ì¶©ë§</option>
                  <option value="pj_roll">PJ ë¡¤ ë°©ì¶©ë§ (ë³„ë„ ê²¬ì  ë¬¸ì˜)</option>
                </select>
              </div>

              <div>
                <label>ì‚¬ì´ì¦ˆ ì„ íƒ</label>
                <select id="entranceSize">
                  <option value="under">1000 Ã— 2100 ì´í•˜</option>
                  <option value="over">1000 Ã— 2100 ì´ìƒ</option>
                </select>
              </div>

              <div>
                <label>ê°œìˆ˜</label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="entranceQty" aria-label="í˜„ê´€ ë¡¤ ê°œìˆ˜ ê°ì†Œ">âˆ’</button>
                  <input id="entranceQty" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="entranceQty" aria-label="í˜„ê´€ ë¡¤ ê°œìˆ˜ ì¦ê°€">ï¼‹</button>
                </div>
              </div>

              <div class="note">* PJ ë¡¤ ì„ íƒ ì‹œ ìë™ê¸ˆì•¡ì€ ê³„ì‚°í•˜ì§€ ì•Šê³  â€œë³„ë„ ê²¬ì  ë¬¸ì˜â€ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <details id="dAl">
          <summary><span>ì•Œë¯¸ëŠ„ í‹€ ì œì‘(ë¯¸ì„¸ë§ í¬í•¨)</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div class="chip">
                <input type="checkbox" id="useAlMake">
                <div>ì•Œë¯¸ëŠ„ í‹€ ì œì‘ ê²¬ì  ì¶”ê°€<div class="note">ì†Œ/ì¤‘, ëŒ€ì°½ ê°œìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div></div>
              </div>

              <div>
                <label>ì†Œ/ì¤‘ (í•©ê³„ ê°œìˆ˜) <span class="note">Â· 1ê°œë‹¹ 100,000ì›</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="alSM" aria-label="ì•Œë¯¸ëŠ„ ì†Œ/ì¤‘ ê°ì†Œ">âˆ’</button>
                  <input id="alSM" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="alSM" aria-label="ì•Œë¯¸ëŠ„ ì†Œ/ì¤‘ ì¦ê°€">ï¼‹</button>
                </div>
              </div>

              <div>
                <label>ëŒ€ì°½ (ê°œìˆ˜) <span class="note">Â· 1ê°œë‹¹ 140,000ì›</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="alL" aria-label="ì•Œë¯¸ëŠ„ ëŒ€ì°½ ê°ì†Œ">âˆ’</button>
                  <input id="alL" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="alL" aria-label="ì•Œë¯¸ëŠ„ ëŒ€ì°½ ì¦ê°€">ï¼‹</button>
                </div>
              </div>
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <details id="dHS">
          <summary><span>í•˜ì´ìƒ¤ì‹œ í‹€ ì œì‘(ë¯¸ì„¸ë§ í¬í•¨)</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div class="chip">
                <input type="checkbox" id="useHighSash2">
                <div>í•˜ì´ìƒ¤ì‹œ í‹€ ì œì‘ ê²¬ì  ì¶”ê°€<div class="note">ì†Œ/ì¤‘, ëŒ€ì°½ ê°œìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div></div>
              </div>

              <div>
                <label>ì†Œ/ì¤‘ (í•©ê³„ ê°œìˆ˜) <span class="note">Â· 1ê°œë‹¹ 100,000ì›</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="hsSM" aria-label="í•˜ì´ìƒ¤ì‹œ ì†Œ/ì¤‘ ê°ì†Œ">âˆ’</button>
                  <input id="hsSM" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="hsSM" aria-label="í•˜ì´ìƒ¤ì‹œ ì†Œ/ì¤‘ ì¦ê°€">ï¼‹</button>
                </div>
              </div>

              <div>
                <label>ëŒ€ì°½ (ê°œìˆ˜) <span class="note">Â· 1ê°œë‹¹ 140,000ì›</span></label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="hsL2" aria-label="í•˜ì´ìƒ¤ì‹œ ëŒ€ì°½ ê°ì†Œ">âˆ’</button>
                  <input id="hsL2" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="hsL2" aria-label="í•˜ì´ìƒ¤ì‹œ ëŒ€ì°½ ì¦ê°€">ï¼‹</button>
                </div>
              </div>
            </div>
          </div>
        </details>

        <div style="height:12px"></div>

        <!-- âœ… ì•ˆì „/ì¶”ë½ë°©ì¶©ë§(ë‹¨ê°€í‘œ: 0.4 / 0.7) -->
        <details id="dSafety">
          <summary><span>ì•ˆì „/ì¶”ë½ ë°©ì¶©ë§ (mm ì…ë ¥)</span><span class="chev">ì—´ê¸°/ë‹«ê¸° â–¾</span></summary>
          <div class="detailBody">
            <div class="row">
              <div class="chip">
                <input type="checkbox" id="useSafety">
                <div>
                  <b>ì•ˆì „/ì¶”ë½ ë°©ì¶©ë§</b> ê²¬ì  ì¶”ê°€
                  <div class="note">0.4/0.7 ì„ íƒ â†’ ê°€ë¡œ/ì„¸ë¡œ(mm) ì…ë ¥ â†’ â€œì¶”ê°€â€ ëˆ„ë¥´ë©´ ë°”ë¡œ í•©ì‚°ë©ë‹ˆë‹¤.</div>
                </div>
              </div>

              <div class="grid2">
                <div>
                  <label>ì¢…ë¥˜</label>
                  <select id="safetyKind">
                    <option value="safe">ì•ˆì „ë°©ì¶©ë§</option>
                    <option value="fall">ì¶”ë½ë°©ì¶©ë§</option>
                  </select>
                </div>
                <div>
                  <label>ë§ ê·œê²©</label>
                  <select id="safetyGauge">
                    <option value="0.4">0.4mm</option>
                    <option value="0.7">0.7mm</option>
                  </select>
                </div>
              </div>

              <div class="grid2">
                <div>
                  <label>ê°€ë¡œ(mm)</label>
                  <input id="safetyW" type="number" min="0" step="1" value="0" inputmode="numeric" placeholder="ì˜ˆ: 850">
                </div>
                <div>
                  <label>ì„¸ë¡œ(mm)</label>
                  <input id="safetyH" type="number" min="0" step="1" value="0" inputmode="numeric" placeholder="ì˜ˆ: 2050">
                </div>
              </div>

              <div>
                <label>ìˆ˜ëŸ‰</label>
                <div class="stepper">
                  <button class="stepBtn" type="button" data-step="-1" data-target="safetyQty" aria-label="ìˆ˜ëŸ‰ ê°ì†Œ">âˆ’</button>
                  <input id="safetyQty" class="stepInput" type="number" min="0" step="1" value="0" inputmode="numeric">
                  <button class="stepBtn" type="button" data-step="1" data-target="safetyQty" aria-label="ìˆ˜ëŸ‰ ì¦ê°€">ï¼‹</button>
                </div>
              </div>

              <button class="btn btnPrimary" type="button" id="btnAddSafety">ì¶”ê°€</button>
              <div class="note" id="safetyHint">* ë©´ì (ã¡)ì€ 0.1 ë‹¨ìœ„ë¡œ ì˜¬ë¦¼(ì˜ˆ: 1.86 â†’ 1.9) í›„ ë‹¨ê°€í‘œ ì†Œë¹„ìê°€ê²© ì ìš©</div>

              <div class="list" id="safetyListBox" style="display:none;">
                <div class="listHead">
                  <span>ì¶”ê°€ëœ í•­ëª©</span>
                  <span class="note" id="safetySumText"></span>
                </div>
                <div class="listBody" id="safetyList"></div>
              </div>
            </div>
          </div>
        </details>

        <div class="result">
          <p class="price" id="resultPrice">0ì›</p>
          <div class="resultMeta" id="resultNote">ê°œìˆ˜ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ì†Œë¹„ìê°€ê²©(ì •ê°€)ì´ ê³„ì‚°ë©ë‹ˆë‹¤.</div>

          <label>ê³ ê°ì—ê²Œ ë³´ë‚¼ ìš”ì•½(ìë™ ìƒì„±)</label>
          <textarea id="summary" readonly></textarea>

          <div class="btnRow">
            <button class="btn btnPrimary" id="btnCopy">ìš”ì•½ ë³µì‚¬</button>
            <button class="btn" id="btnReset">ì´ˆê¸°í™”</button>
          </div>
          <div class="toast" id="toast"></div>

          <div class="note" style="margin-top:8px;">
            ì•„ë˜ <b>ìƒë‹´ë°›ê¸°</b> ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>ìš”ì•½ì´ ìë™ ë³µì‚¬</b>ë˜ê³ , ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- modal -->
  <div class="modalBack" id="modalBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalTop"><b id="modalTitle">ê²¬ì ìš”ì•½ ìë™ë³µì‚¬</b></div>
      <div class="modalBody" id="modalBody">
        ë³µì‚¬ ì™„ë£Œ! ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™í•˜ë©´ ì±„íŒ…ì°½ì— ë¶™ì—¬ë„£ê¸°ë§Œ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
      </div>
      <div class="modalBtns">
        <button class="btn btnPrimary" id="btnGoKakao">ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™</button>
        <button class="btn btnSoft" id="btnCloseModal">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- sticky kakao -->
  <div class="kakaoSticky">
    <button class="kakaoBtn" id="kakaoConsultBtn" type="button">
      <div class="kLeft">
        <div class="kBadge">í†¡</div>
        <div class="kText">
          <b>ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ… ìƒë‹´</b>
          <span>ëˆ„ë¥´ë©´ ê²¬ì ìš”ì•½ ìë™ë³µì‚¬</span>
        </div>
      </div>
      <div class="kRight">ìƒë‹´ë°›ê¸°</div>
    </button>
  </div>

<script>
const KAKAO_URL = "https://open.kakao.com/o/symXVtei";

const CONFIG = {
  UNIT_PRICE_WINDOW: {
    micro:                 { S: 10000, M: 30000, L: 50000 },
    hydro_micro:           { S: 20000, M: 40000, L: 60000 },
    black_stainless_micro: { S: 25000, M: 50000, L: 70000 },
  },
  ENTRANCE_ROLL_PRICE: {
    normal: { under: 150000, over: 170000 },
    micro:  { under: 170000, over: 200000 },
    pj_roll:{ under: null,   over: null },
  },
  MAKE_PRICE: { SM: 100000, L: 140000 },

  // (ì°¸ê³ ìš©) ì§€ê¸ˆ í™”ë©´ì€ ì†Œë¹„ìê°€ê²© ê¸°ì¤€ í‘œê¸°
  DISCOUNT_RATE: 0.10,

  // âœ… ì‚¬ì§„ ë‹¨ê°€í‘œ "ì†Œë¹„ìê°€ê²©" ê·¸ëŒ€ë¡œ (0.4mm / 0.7mm)
  SAFETY_CONSUMER_TABLE: {
    "0.4": {
      "0.3":150000,"0.4":150000,"0.5":150000,"0.6":150000,
      "0.7":160000,"0.8":170000,"0.9":180000,"1.0":190000,
      "1.1":200000,"1.2":210000,"1.3":220000,"1.4":230000,
      "1.5":240000,"1.6":250000,"1.7":260000,"1.8":270000,
      "1.9":280000,"2.0":290000,"2.1":300000,"2.2":310000,
      "2.3":320000,"2.4":330000,"2.5":340000,"2.6":350000,
      "2.7":360000,"2.8":370000,"2.9":380000,"3.0":390000
    },
    "0.7": {
      "0.3":180000,"0.4":180000,"0.5":180000,"0.6":180000,
      "0.7":190000,"0.8":200000,"0.9":210000,"1.0":220000,
      "1.1":230000,"1.2":240000,"1.3":250000,"1.4":260000,
      "1.5":270000,"1.6":280000,"1.7":290000,"1.8":300000,
      "1.9":310000,"2.0":320000,"2.1":330000,"2.2":340000,
      "2.3":350000,"2.4":360000,"2.5":370000,"2.6":380000,
      "2.7":390000,"2.8":400000,"2.9":410000,"3.0":420000
    }
  },

  SAFETY_MIN_M2: 0.3,
  SAFETY_MAX_M2: 3.0
};

const $ = (id) => document.getElementById(id);
const fmt = (n) => (Math.round(n)).toLocaleString("ko-KR") + "ì›";
const clampInt = (v) => Math.max(0, Number.isFinite(v) ? Math.floor(v) : 0);
const clampNum = (v) => Math.max(0, Number.isFinite(v) ? v : 0);

function meshLabel(k){
  return ({
    micro: "ë¯¸ì„¸ë°©ì¶©ë§",
    hydro_micro: "ë°œìˆ˜ì½”íŒ… ë¯¸ì„¸ë°©ì¶©ë§",
    black_stainless_micro: "ë¸”ë™ìŠ¤í… ë¯¸ì„¸ë°©ì¶©ë§"
  })[k] || k;
}
function entranceTypeLabel(k){
  return ({
    normal: "í˜„ê´€ ë¡¤ë°©ì¶©ë§",
    micro: "í˜„ê´€ ë¯¸ì„¸ ë¡¤ë°©ì¶©ë§",
    pj_roll: "PJ ë¡¤ ë°©ì¶©ë§(ë³„ë„ ê²¬ì ë¬¸ì˜)"
  })[k] || k;
}
function entranceSizeLabel(k){
  return (k === "under") ? "1000Ã—2100 ì´í•˜" : "1000Ã—2100 ì´ìƒ";
}
function safetyKindLabel(k){
  return ({ safe:"ì•ˆì „ë°©ì¶©ë§", fall:"ì¶”ë½ë°©ì¶©ë§" })[k] || k;
}

function toast(msg){
  $("toast").textContent = msg;
  setTimeout(()=>{ $("toast").textContent = ""; }, 2400);
}

/* âœ… ë©´ì (ã¡) 0.1ë‹¨ìœ„ ì˜¬ë¦¼ + ìµœì†Œ/ìµœëŒ€ ì²˜ë¦¬ */
function ceilToTenth(area){
  return Math.ceil(area * 10) / 10;
}
function safetyRoundedM2FromMM(wMm, hMm){
  const raw = (wMm * hMm) / 1_000_000; // mm^2 -> m^2
  let rounded = ceilToTenth(raw);
  if(rounded < CONFIG.SAFETY_MIN_M2) rounded = CONFIG.SAFETY_MIN_M2;
  // 1.799999 ê°™ì€ ë¶€ë™ì†Œìˆ˜ ë°©ì§€
  rounded = Number(rounded.toFixed(1));
  return { raw, rounded };
}
function safetyPriceByGaugeM2(gauge, roundedM2){
  const key = roundedM2.toFixed(1);
  const table = CONFIG.SAFETY_CONSUMER_TABLE[gauge];
  if(!table) return null;
  return table[key] ?? null;
}

/* âœ… ì•ˆì „/ì¶”ë½ í•­ëª© ë¦¬ìŠ¤íŠ¸ (ì—¬ëŸ¬ê°œ ì¶”ê°€ ê°€ëŠ¥) */
let safetyItems = []; // {id, kind, gauge, w, h, qty, rawM2, roundedM2, unitPrice}

function renderSafetyList(){
  const box = $("safetyListBox");
  const list = $("safetyList");

  if(safetyItems.length === 0){
    box.style.display = "none";
    list.innerHTML = "";
    $("safetySumText").textContent = "";
    return;
  }

  box.style.display = "block";
  list.innerHTML = "";

  let sum = 0;

  safetyItems.forEach(item=>{
    const lineTotal = item.unitPrice * item.qty;
    sum += lineTotal;

    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <div class="left">
        <b>${safetyKindLabel(item.kind)} Â· ${item.gauge}mm</b>
        <div class="meta">
          ${item.w}Ã—${item.h}mm / ë©´ì  ${item.rawM2.toFixed(2)}ã¡ â†’ <b>${item.roundedM2.toFixed(1)}ã¡</b> ì ìš©<br/>
          ì†Œë¹„ìê°€ê²©: ${fmt(item.unitPrice)} Ã— ${item.qty} = <b>${fmt(lineTotal)}</b>
        </div>
      </div>
      <button class="xBtn" type="button" data-del-safety="${item.id}">ì‚­ì œ</button>
    `;
    list.appendChild(div);
  });

  $("safetySumText").textContent = `í•©ê³„ ${fmt(sum)}`;
}

function safetySumTotal(){
  return safetyItems.reduce((acc, it)=> acc + (it.unitPrice * it.qty), 0);
}

function buildSummary(totalConsumer, memo, meshKey, cntS, cntM, cntL,
  useEntranceRoll, entranceType, entranceSize, entranceQty, entranceInquiry,
  useAlMake, alSM, alL,
  useHighSash2, hsSM, hsL2,
  discountOn
){
  const lines = [];
  lines.push(`ì°½ë¬¸í˜•: ${meshLabel(meshKey)}`);
  lines.push(`ì°½ ê°œìˆ˜: ì†Œ ${cntS} / ì¤‘ ${cntM}(ë†’ì´ 1500â†“) / ëŒ€ ${cntL}(ë†’ì´ 2300â†“)`);

  if(useEntranceRoll){
    lines.push(`í˜„ê´€ë¡¤: ${entranceTypeLabel(entranceType)} / ${entranceSizeLabel(entranceSize)} / ${entranceQty}ê°œ`);
    if(entranceInquiry) lines.push(`- PJ ë¡¤: ë³„ë„ ê²¬ì  ë¬¸ì˜`);
  }

  if(useAlMake){
    lines.push(`ì•Œë¯¸ëŠ„ í‹€ ì œì‘(ë¯¸ì„¸ë§ í¬í•¨): ì†Œ/ì¤‘ ${alSM}ê°œ(Ã—100,000) / ëŒ€ ${alL}ê°œ(Ã—140,000)`);
  }
  if(useHighSash2){
    lines.push(`í•˜ì´ìƒ¤ì‹œ í‹€ ì œì‘(ë¯¸ì„¸ë§ í¬í•¨): ì†Œ/ì¤‘ ${hsSM}ê°œ(Ã—100,000) / ëŒ€ ${hsL2}ê°œ(Ã—140,000)`);
  }

  if(safetyItems.length){
    lines.push(`ì•ˆì „/ì¶”ë½ ë°©ì¶©ë§:`);
    safetyItems.forEach((it, idx)=>{
      const lineTotal = it.unitPrice * it.qty;
      lines.push(
        `- ${idx+1}) ${safetyKindLabel(it.kind)} ${it.gauge}mm / ${it.w}Ã—${it.h}mm / ${it.rawM2.toFixed(2)}ã¡â†’${it.roundedM2.toFixed(1)}ã¡ / ${fmt(it.unitPrice)}Ã—${it.qty}=${fmt(lineTotal)}`
      );
    });
  }

  lines.push(`ì†Œë¹„ìê°€ê²©(ì •ê°€) ìë™ê²¬ì : ${fmt(totalConsumer)}`);
  lines.push(`ì˜ˆì•½/ì˜ìˆ˜ì¦ë¦¬ë·° ì•½ì† ì²´í¬: ${discountOn ? "ì²´í¬" : "ë¯¸ì²´í¬"}`);
  lines.push(`ë©”ëª¨: ${memo || "ì—†ìŒ"}`);

  return "ìë™ê²¬ì  ë³´ê³  ì—°ë½ë“œë ¤ìš”.\n" + lines.join("\n");
}

function calc(){
  const discountOn = $("discount10").checked;

  const meshKey = $("meshType").value;
  const cntS = clampInt(parseFloat($("cntS").value));
  const cntM = clampInt(parseFloat($("cntM").value));
  const cntL = clampInt(parseFloat($("cntL").value));
  const memo = ($("memo").value || "").trim();

  let total = 0;

  const up = CONFIG.UNIT_PRICE_WINDOW[meshKey] || CONFIG.UNIT_PRICE_WINDOW.micro;
  total += up.S * cntS + up.M * cntM + up.L * cntL;

  const useEntranceRoll = $("useEntranceRoll").checked;
  const entranceType = $("entranceType").value;
  const entranceSize = $("entranceSize").value;
  const entranceQty = clampInt(parseFloat($("entranceQty").value));

  let entranceInquiry = false;
  if(useEntranceRoll){
    const p = CONFIG.ENTRANCE_ROLL_PRICE[entranceType]?.[entranceSize];
    if(p == null){
      entranceInquiry = true;
    }else{
      total += p * entranceQty;
    }
  }

  const useAlMake = $("useAlMake").checked;
  const alSM = clampInt(parseFloat($("alSM").value));
  const alL = clampInt(parseFloat($("alL").value));
  if(useAlMake){
    total += CONFIG.MAKE_PRICE.SM * alSM;
    total += CONFIG.MAKE_PRICE.L  * alL;
  }

  const useHighSash2 = $("useHighSash2").checked;
  const hsSM = clampInt(parseFloat($("hsSM").value));
  const hsL2 = clampInt(parseFloat($("hsL2").value));
  if(useHighSash2){
    total += CONFIG.MAKE_PRICE.SM * hsSM;
    total += CONFIG.MAKE_PRICE.L  * hsL2;
  }

  // âœ… ì•ˆì „/ì¶”ë½ ë°©ì¶©ë§ í•©ì‚°
  const useSafety = $("useSafety").checked;
  if(useSafety){
    total += safetySumTotal();
  }

  const any =
    (cntS+cntM+cntL) > 0 ||
    (useEntranceRoll && entranceQty>0) ||
    (useAlMake && (alSM+alL)>0) ||
    (useHighSash2 && (hsSM+hsL2)>0) ||
    (useSafety && safetyItems.length>0);

  if(!any) total = 0;

  // âœ… í˜„ì¬ í™”ë©´ì€ ì†Œë¹„ìê°€ê²©(ì •ê°€)ë§Œ í‘œì‹œ
  const totalConsumer = total;

  $("resultPrice").textContent = fmt(totalConsumer);

  let note = any ? "ì†Œë¹„ìê°€ê²©(ì •ê°€) ê¸°ì¤€ ìë™ê²¬ì ì…ë‹ˆë‹¤." : "ê°œìˆ˜ ì…ë ¥í•˜ë©´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤.";
  if(useEntranceRoll && entranceInquiry){
    note = "âš ï¸ PJ ë¡¤ ë°©ì¶©ë§ì€ ìë™ê²¬ì ì´ ì•„ë‹ˆë¼ â€˜ë³„ë„ ê²¬ì  ë¬¸ì˜â€™ì…ë‹ˆë‹¤. ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ë¬¸ì˜ ì£¼ì„¸ìš”.";
  }
  if(useSafety && safetyItems.some(it => it.unitPrice == null)){
    note = "âš ï¸ ì•ˆì „/ì¶”ë½ ë°©ì¶©ë§ ì¼ë¶€ í•­ëª©ì´ ë‹¨ê°€í‘œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚©ë‹ˆë‹¤. ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ë¬¸ì˜ ì£¼ì„¸ìš”.";
  }
  $("resultNote").textContent = note;

  const summary = buildSummary(
    totalConsumer, memo, meshKey, cntS, cntM, cntL,
    useEntranceRoll, entranceType, entranceSize, entranceQty, entranceInquiry,
    useAlMake, alSM, alL,
    useHighSash2, hsSM, hsL2,
    discountOn
  );
  $("summary").value = summary;

  return { summary, any };
}

async function copyText(text){
  try{
    await navigator.clipboard.writeText(text);
    return true;
  }catch(e){
    const ta = $("summary");
    ta.removeAttribute("readonly");
    ta.value = text;
    ta.select();
    ta.setSelectionRange(0, 99999);
    const ok = document.execCommand("copy");
    ta.setAttribute("readonly","readonly");
    return ok;
  }
}

function applyStep(targetId, delta){
  const el = $(targetId);
  if(!el) return;
  const cur = clampInt(parseFloat(el.value));
  const next = Math.max(0, cur + delta);
  el.value = next;
  el.dispatchEvent(new Event("input", { bubbles:true }));
}

function openModal(msg){
  $("modalBody").textContent = msg;
  $("modalBack").style.display = "flex";
  $("modalBack").setAttribute("aria-hidden","false");
}
function closeModal(){
  $("modalBack").style.display = "none";
  $("modalBack").setAttribute("aria-hidden","true");
}

function wire(){
  [
    "discount10",
    "meshType","cntS","cntM","cntL","memo",
    "useEntranceRoll","entranceType","entranceSize","entranceQty",
    "useAlMake","alSM","alL",
    "useHighSash2","hsSM","hsL2",
    "useSafety"
  ].forEach(id => $(id).addEventListener("input", calc));

  document.addEventListener("click", (e)=>{
    const btn = e.target.closest("[data-step][data-target]");
    if(btn){
      const delta = parseInt(btn.getAttribute("data-step"), 10);
      const targetId = btn.getAttribute("data-target");
      applyStep(targetId, delta);
      return;
    }

    const del = e.target.closest("[data-del-safety]");
    if(del){
      const id = del.getAttribute("data-del-safety");
      safetyItems = safetyItems.filter(x => x.id !== id);
      renderSafetyList();
      calc();
      return;
    }
  });

  ["cntS","cntM","cntL","entranceQty","alSM","alL","hsSM","hsL2","safetyQty","safetyW","safetyH"].forEach(id=>{
    const el = $(id);
    if(!el) return;
    el.addEventListener("change", ()=>{
      if(id === "safetyW" || id === "safetyH"){
        el.value = clampInt(parseFloat(el.value));
      }else{
        el.value = clampInt(parseFloat(el.value));
      }
      calc();
    });
  });

  $("useEntranceRoll").addEventListener("input", ()=>{
    const q = parseInt($("entranceQty").value || "0", 10);
    if($("useEntranceRoll").checked && q === 0) $("entranceQty").value = 1;
    calc();
  });

  $("useSafety").addEventListener("input", ()=>{
    if($("useSafety").checked){
      if(clampInt(parseFloat($("safetyQty").value)) === 0) $("safetyQty").value = 1;
    }
    calc();
  });

  $("btnAddSafety").addEventListener("click", ()=>{
    if(!$("useSafety").checked){
      toast("ë¨¼ì € â€˜ì•ˆì „/ì¶”ë½ ë°©ì¶©ë§â€™ ì²´í¬ë¥¼ í•´ì£¼ì„¸ìš”.");
      return;
    }

    const kind = $("safetyKind").value;
    const gauge = $("safetyGauge").value;

    const w = clampInt(parseFloat($("safetyW").value));
    const h = clampInt(parseFloat($("safetyH").value));
    const qty = clampInt(parseFloat($("safetyQty").value));

    if(w <= 0 || h <= 0){
      toast("ê°€ë¡œ/ì„¸ë¡œ(mm)ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }
    if(qty <= 0){
      toast("ìˆ˜ëŸ‰ì„ 1ê°œ ì´ìƒìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }

    const { raw, rounded } = safetyRoundedM2FromMM(w, h);

    if(rounded > CONFIG.SAFETY_MAX_M2){
      toast("ë©´ì ì´ 3.0ã¡ ì´ˆê³¼ì…ë‹ˆë‹¤. ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.");
      return;
    }

    const unitPrice = safetyPriceByGaugeM2(gauge, rounded);
    if(unitPrice == null){
      toast("ë‹¨ê°€í‘œì—ì„œ ê°€ê²©ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”. ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.");
      return;
    }

    safetyItems.push({
      id: String(Date.now()) + "_" + Math.random().toString(16).slice(2),
      kind, gauge, w, h, qty,
      rawM2: raw,
      roundedM2: rounded,
      unitPrice
    });

    renderSafetyList();
    calc();
    toast("ì¶”ê°€ ì™„ë£Œ");
  });

  $("btnCopy").addEventListener("click", async ()=>{
    const { summary } = calc();
    const ok = await copyText(summary);
    toast(ok ? "ë³µì‚¬ ì™„ë£Œ! ì˜¤í”ˆì±„íŒ…ì— ë¶™ì—¬ë„£ê¸° í•˜ë©´ ë" : "ë³µì‚¬ ì‹¤íŒ¨ â€” ìš”ì•½ì„ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•´ì£¼ì„¸ìš”");
  });

  $("btnReset").addEventListener("click", ()=>{
    $("discount10").checked = false;

    $("meshType").value = "micro";
    $("cntS").value = 0; $("cntM").value = 0; $("cntL").value = 0;
    $("memo").value = "";

    $("useEntranceRoll").checked = false;
    $("entranceType").value = "normal";
    $("entranceSize").value = "under";
    $("entranceQty").value = 0;

    $("useAlMake").checked = false;
    $("alSM").value = 0; $("alL").value = 0;

    $("useHighSash2").checked = false;
    $("hsSM").value = 0; $("hsL2").value = 0;

    // safety reset
    $("useSafety").checked = false;
    $("safetyKind").value = "safe";
    $("safetyGauge").value = "0.4";
    $("safetyW").value = 0;
    $("safetyH").value = 0;
    $("safetyQty").value = 0;
    safetyItems = [];
    renderSafetyList();

    calc();
    toast("ì´ˆê¸°í™” ì™„ë£Œ");
  });

  $("btnGoQuote").addEventListener("click", ()=>{
    $("dWindow").open = true;
    $("quoteSection").scrollIntoView({ behavior:"smooth", block:"start" });
    setTimeout(()=> $("meshType").focus(), 450);
  });

  $("btnHow").addEventListener("click", ()=>{
    $("howSection").scrollIntoView({ behavior:"smooth", block:"start" });
  });

  $("kakaoConsultBtn").addEventListener("click", async ()=>{
    const { summary, any } = calc();

    if(!any){
      openModal("ì•„ì§ ì…ë ¥ëœ í•­ëª©ì´ ì—†ì–´ìš”. ì•„ë˜ì—ì„œ ê°œìˆ˜ ì…ë ¥ í›„ ë‹¤ì‹œ â€˜ìƒë‹´ë°›ê¸°â€™ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
      $("btnGoKakao").style.display = "none";
      $("quoteSection").scrollIntoView({ behavior:"smooth", block:"start" });
      $("dWindow").open = true;
      return;
    }

    const ok = await copyText(summary);

    $("btnGoKakao").style.display = "inline-flex";
    if(ok){
      openModal("ë³µì‚¬ ì™„ë£Œ! ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™í•˜ë©´ ì±„íŒ…ì°½ì— â€˜ë¶™ì—¬ë„£ê¸°â€™ë§Œ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.");
      setTimeout(()=> window.open(KAKAO_URL, "_blank", "noopener"), 650);
    }else{
      openModal("ë³µì‚¬ê°€ ë§‰íŒ ê¸°ê¸°ì˜ˆìš”. ì•„ë˜ ìš”ì•½ì„ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•œ ë’¤, ì˜¤í”ˆì±„íŒ…ìœ¼ë¡œ ì´ë™í•´ì£¼ì„¸ìš”.");
    }
  });

  $("btnGoKakao").addEventListener("click", ()=>{
    window.open(KAKAO_URL, "_blank", "noopener");
  });
  $("btnCloseModal").addEventListener("click", closeModal);
  $("modalBack").addEventListener("click", (e)=>{
    if(e.target === $("modalBack")) closeModal();
  });

  calc();
}
wire();
</script>
</body>
</html>
